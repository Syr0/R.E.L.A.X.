/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => RelaxPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  "regexPairs": [
    {
      "isActive": true,
      "key": "Domains",
      "regex": "([a-zA-Z0-9\\-\\.]+\\.(?:com|org|net|mil|edu|COM|ORG|NET|MIL|EDU))"
    },
    {
      "isActive": true,
      "key": "IP",
      "regex": "((?:(?:(?!1?2?7\\.0\\.0\\.1)(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)))"
    },
    {
      "isActive": true,
      "key": "eMail",
      "regex": "([A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,})"
    },
    {
      "isActive": true,
      "key": "GUID",
      "regex": "([A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12})"
    },
    {
      "isActive": true,
      "key": "SHA256",
      "regex": "\\b([a-fA-F0-9]{64})\\b"
    },
    {
      "isActive": true,
      "key": "JARM",
      "regex": "\\b([a-fA-F0-9]{62})\\b"
    },
    {
      "isActive": true,
      "key": "SHA1",
      "regex": "\\b([a-fA-F0-9]{40})\\b"
    },
    {
      "isActive": true,
      "key": "MD5",
      "regex": "\\b([a-fA-F0-9]{32})\\b"
    },
    {
      "isActive": true,
      "key": "Bitcoin",
      "regex": "\\b([13]{1}[a-km-zA-HJ-NP-Z1-9]{26,33}|bc1[a-z0-9]{39,59})\\b"
    },
    {
      "isActive": true,
      "key": "Date",
      "regex": "((?:0[1-9]|[12][0-9]|3[01])[\\\\\\/\\.-](?:0[1-9]|1[012])[\\\\\\/\\.-](?:19|20|)\\d\\d)"
    },
    {
      "isActive": true,
      "key": "Windows Usernames",
      "regex": "\\\\Users\\\\+(?!(?:Public|Administrator)\\\\)([^\\\\]+)\\\\"
    },
    {
      "isActive": true,
      "key": "Markdown-Italic",
      "regex": `(?:[\xB4'\u2018\u2019](((?:(?!<br>|\\r|\\n)[^\xB4\u2019\u2018' ]){4,30}))[\xB4\u2019\u2018']|(?:["\u201C]((?:(?!<br>|\\r|\\n)[^"\u201D]){4,50})["\u201D])|(?:[_]((?:(?!<br>|\\r|\\n)[^_]){4,50})[_]))`
    },
    {
      "isActive": true,
      "key": "Quotes-DE",
      "regex": '\u201E([^\\"]+){5,66}["|"]'
    },
    {
      "isActive": true,
      "key": "Windows Forensics",
      "regex": "([\\w]+.(?:bat|ps1|dll|exe|reg))[\\b]"
    },
    {
      "isActive": true,
      "key": "Linux Forensics",
      "regex": "([\\w]+\\.(?:sh|so|conf|tar.gz))[\\b]"
    },
    {
      "isActive": true,
      "key": "Mac Forensics",
      "regex": "([\\w]+\\.(?:app|pkg|dmg))[\\b]"
    },
    {
      "isActive": true,
      "key": "Signal Frequencies",
      "regex": "(\\b[0-9]{1,4}(?:\\.\\d{1,4})?\\s?(Hz|kHz|MHz|GHz)\\b)"
    },
    {
      "isActive": true,
      "key": "BibTeX Entries",
      "regex": "@(article|book|inbook|conference|inproceedings){([^}]+)}"
    },
    {
      "isActive": true,
      "key": "GPS Coordinates",
      "regex": "\\b[+-]?[0-9]{1,2}\\.[0-9]+,\\s*[+-]?[0-9]{1,3}\\.[0-9]+\\b"
    },
    {
      "isActive": true,
      "key": "ISBN Numbers",
      "regex": "\\bISBN\\s?(?:-?13|-10)?:?\\s?[0-9-]{10,17}\\b"
    },
    {
      "isActive": true,
      "key": "Camera Settings",
      "regex": "\\bISO\\s?[0-9]+|f/[0-9.]+|1/[0-9]+\\s?sec\\b"
    },
    {
      "isActive": true,
      "key": "Historical Dates",
      "regex": "\\b(?:[0-9]{1,4} (AD|BC)|[0-9]{1,4}th century)\\b"
    },
    {
      "isActive": true,
      "key": "Processor Specs",
      "regex": "\\bIntel Core i[3579]-[0-9]{4}[HQGU]K?|AMD Ryzen [3579] [0-9]{4}X?\\b"
    },
    {
      "isActive": true,
      "key": "Images",
      "regex": "([\\w]+\\.(?:jpg|jpeg|png|gif|bmp|tiff))[\\b]"
    },
    {
      "isActive": true,
      "key": "Movies",
      "regex": "([\\w]+\\.(?:mp4|avi|mkv|mov|wmv))[\\b]"
    },
    {
      "isActive": true,
      "key": "Audio",
      "regex": "([\\w]+\\.(?:mp3|wav|aac|flac))[\\b]"
    },
    {
      "isActive": false,
      "key": "Harmless Files",
      "regex": "([\\w]+\\.(?:txt|asc|csv|log|md))[\\b]"
    },
    {
      "isActive": false,
      "key": "Base64 Strings",
      "regex": "([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?"
    },
    {
      "isActive": false,
      "key": "Script Language File",
      "regex": "([\\w]+\\.(?:py|js|java|cs|cpp|rb|go|php))[\\b]"
    },
    {
      "isActive": false,
      "key": "Chord Progressions",
      "regex": "\\b((?:C|Dm|Em|F|G|Am|Bdim)(?:\\s->\\s(?:C|Dm|Em|F|G|Am|Bdim))*)\\b"
    },
    {
      "isActive": false,
      "key": "Hex Colors",
      "regex": "#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"
    },
    {
      "isActive": false,
      "key": "Chemical Elements",
      "regex": "\\b(?:H|He|Li|Be|B|C|N|O|F|Ne|Na|Mg|Al|Si|P|S|Cl|Ar|K|Ca)\\b"
    },
    {
      "isActive": false,
      "key": "Social Media Hashtags",
      "regex": "#[A-Za-z0-9_]+"
    },
    {
      "isActive": false,
      "key": "Academic Citations",
      "regex": "\\b\\([A-Za-z]+,\\s[0-9]{4}\\)\\b"
    },
    {
      "isActive": false,
      "key": "Temperature Readings",
      "regex": "\\b-?[0-9]+\\s?(\xB0C|\xB0F|K)\\b"
    }
  ],
  ignoreLinks: true,
  ignoreCodeBlocks: true,
  defangURLs: true,
  ignoreURLs: false
};
var Mutex = class {
  constructor() {
    this._promise = null;
    this._resolve = null;
  }
  async lock() {
    if (this._promise)
      await this._promise;
    this._promise = new Promise((resolve) => {
      this._resolve = resolve;
    });
  }
  unlock() {
    if (this._resolve) {
      this._resolve();
      this._resolve = null;
      this._promise = null;
    }
  }
  async runExclusive(callback) {
    await this.lock();
    try {
      return await callback();
    } finally {
      this.unlock();
    }
  }
};
var RelaxSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.isHighlited = false;
    this.plugin = plugin;
  }
  setHighlighted(highlight) {
    this.isHighlited = highlight;
    if (this.saveButton) {
      this.saveButton.disabled = !highlight;
      if (highlight) {
        this.saveButton.classList.add("is-highlight");
      } else {
        this.saveButton.classList.remove("is-highlight");
      }
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const keyValueContainer = containerEl.createEl("div");
    keyValueContainer.style.display = "flex";
    keyValueContainer.style.flexDirection = "column";
    function validateContent(content) {
      const regex = /\[\[(.+?)\]\]/g;
      return !regex.test(content);
    }
    function applyValidationStyle(textarea) {
      if (validateContent(textarea.value)) {
        const accentColor = getComputedStyle(document.documentElement).getPropertyValue("--color-accent").trim();
        textarea.style.borderColor = accentColor;
      } else {
        textarea.style.borderColor = "red";
      }
    }
    document.addEventListener("DOMContentLoaded", (event) => {
      const modalButton = document.querySelector("#openModalButton");
      modalButton.addEventListener("click", function() {
        const modal = document.querySelector(".modal");
        const textarea = modal.querySelector("textarea");
        applyValidationStyle(textarea);
        textarea.addEventListener("input", function() {
          applyValidationStyle(textarea);
        });
      });
    });
    const validateRegexInput = (input) => {
      let errorMsg = "";
      try {
        let reg = new RegExp(input.value);
        let groupCount = (input.value.match(/\((?!\?)/g) || []).length;
        if (groupCount > 1) {
          input.style.border = "2px solid red";
          errorMsg = "More than one group detected.";
        } else {
          input.style.border = "";
        }
      } catch (e) {
        input.style.border = "2px solid red";
        errorMsg = "Invalid regex.";
      }
      const errorElement = input.nextSibling;
      if (errorElement && errorElement.classList.contains("regex-error")) {
        errorElement.textContent = errorMsg;
      } else {
        const span = document.createElement("span");
        span.className = "regex-error";
        span.textContent = errorMsg;
        input.parentNode.insertBefore(span, input.nextSibling);
      }
    };
    const addKeyValue = (key, value, isActive = false) => {
      const row = keyValueContainer.createEl("div");
      row.style.display = "flex";
      row.style.alignItems = "center";
      row.style.justifyContent = "space-between";
      const dragHandle = row.createEl("span", { className: "drag-handle", text: "\u2630" });
      const activeCheckbox = row.createEl("input", { className: "active-checkbox" });
      activeCheckbox.type = "checkbox";
      activeCheckbox.checked = isActive;
      row.appendChild(activeCheckbox);
      const keyInput = row.createEl("input", { className: "key-input", placeholder: "Description-Key", value: key != null ? key : "" });
      keyInput.style.flex = "1";
      keyInput.style.marginRight = "10px";
      const valueInput = row.createEl("input", { className: "value-input", placeholder: "Regexp", value: value != null ? value : "" });
      valueInput.style.flex = "2";
      valueInput.style.marginRight = "10px";
      row.createEl("button", { text: "Delete", className: `delete-button-${key != null ? key : Date.now()}` }).addEventListener("click", () => {
        row.remove();
        updateRegexOrderFromDOM.call(this);
      });
      if (dragHandle)
        makeDraggable(row, dragHandle);
      valueInput.addEventListener("input", () => validateRegexInput(valueInput));
    };
    containerEl.createEl("button", { text: "Add Regexp" }).addEventListener("click", () => addKeyValue());
    for (const { isActive, key, regex } of this.plugin.settings.regexPairs) {
      addKeyValue(key, regex, isActive);
    }
    let startY = 0;
    let startTop = 0;
    let initialOffsetY = 0;
    function updateRegexOrderFromDOM(pluginObj) {
      const regexPairs = [];
      keyValueContainer.querySelectorAll("div").forEach((row) => {
        const activeCheckboxInput = row.querySelector('input[type="checkbox"]');
        const keyInput = row.querySelector('input[placeholder="Description-Key"]');
        const valueInput = row.querySelector('input[placeholder="Regexp"]');
        if (keyInput && valueInput && activeCheckboxInput) {
          const key = keyInput.value;
          const value = valueInput.value;
          const isActive = activeCheckboxInput.checked;
          regexPairs.push({ isActive, key, regex: value });
        }
      });
      if (pluginObj.plugin && pluginObj.plugin.settings) {
        pluginObj.plugin.settings.regexPairs = regexPairs;
        pluginObj.plugin.saveSettings();
      } else {
        console.error("Plugin or settings not available");
      }
    }
    let dragElement = null;
    let currentIndex = null;
    let newIndex = null;
    function makeDraggable(element, dragHandle) {
      if (!dragHandle) {
        console.error("Drag handle not found!", element.innerHTML);
        return;
      }
      dragHandle.addEventListener("mousedown", function(e) {
        e.preventDefault();
        e.stopPropagation();
        const settingsContainerTop = document.querySelector(".vertical-tab-content-container").getBoundingClientRect().top;
        const elementRect = element.getBoundingClientRect();
        initialOffsetY = e.clientY - elementRect.top + settingsContainerTop;
        currentIndex = [...element.parentElement.children].indexOf(element);
        dragElement = element;
        dragElement.style.zIndex = "1000";
        dragElement.style.position = "absolute";
        const newTop = e.clientY - initialOffsetY;
        dragElement.style.top = `${newTop}px`;
        document.addEventListener("mousemove", onDragMove);
        document.addEventListener("mouseup", onDragEnd);
      });
    }
    function onDragMove(e) {
      if (dragElement) {
        const newTop = e.clientY - initialOffsetY;
        dragElement.style.top = `${newTop}px`;
        newIndex = null;
        let closestDistance = Infinity;
        [...dragElement.parentElement.children].forEach((child, idx) => {
          if (child !== dragElement) {
            const rect = child.getBoundingClientRect();
            const distance = Math.abs(rect.top + rect.height / 2 - e.clientY);
            if (distance < closestDistance) {
              closestDistance = distance;
              newIndex = idx;
            }
          }
        });
      }
    }
    function onDragEnd() {
      if (dragElement) {
        dragElement.style.position = "";
        dragElement.style.top = "";
        dragElement.style.zIndex = "";
        if (newIndex !== null && currentIndex !== null && newIndex !== currentIndex) {
          const parent = dragElement.parentElement;
          if (newIndex >= parent.children.length) {
            parent.appendChild(dragElement);
          } else {
            parent.insertBefore(dragElement, parent.children[newIndex + (newIndex > currentIndex ? 1 : 0)]);
          }
        }
        dragElement = null;
        updateRegexOrderFromDOM.call(this);
        document.removeEventListener("mousemove", onDragMove);
        document.removeEventListener("mouseup", onDragEnd);
        reorderElements();
        currentIndex = null;
        newIndex = null;
      }
    }
    function reorderElements() {
      keyValueContainer.querySelectorAll("div").forEach((row) => {
        row.style.top = "";
      });
    }
    new import_obsidian.Setting(containerEl).setName("Ignore Links").addToggle((toggle) => {
      var _a;
      toggle.setValue((_a = this.plugin.settings.ignoreLinks) != null ? _a : true).onChange(async (value) => {
        this.plugin.settings.ignoreLinks = value;
        await this.plugin.saveSettings();
      }).setTooltip("Do not modify Links, preventing to handle the same data over and over again.");
    });
    new import_obsidian.Setting(containerEl).setName("Ignore URLs").addToggle((toggle) => {
      var _a;
      toggle.setValue((_a = this.plugin.settings.ignoreURLs) != null ? _a : true).onChange(async (value) => {
        this.plugin.settings.ignoreURLs = value;
        await this.plugin.saveSettings();
      }).setTooltip("Do not modify URLs, so they do keep working.");
    });
    new import_obsidian.Setting(containerEl).setName("Defang URLs").addToggle((toggle) => {
      var _a;
      toggle.setValue((_a = this.plugin.settings.defangURLs) != null ? _a : true).onChange(async (value) => {
        this.plugin.settings.defangURLs = value;
        await this.plugin.saveSettings();
      }).setTooltip("https[:]// -> https://");
    });
    new import_obsidian.Setting(containerEl).setName("Ignore Code Blocks").addToggle((toggle) => {
      var _a;
      toggle.setValue((_a = this.plugin.settings.ignoreCodeBlocks) != null ? _a : false).onChange(async (value) => {
        this.plugin.settings.ignoreCodeBlocks = value;
        await this.plugin.saveSettings();
      }).setTooltip("Ignore content within code blocks when linking regexes.");
    });
    new import_obsidian.Setting(containerEl).setName("Save").addButton((button) => {
      button.setButtonText("Save").onClick(() => {
        updateRegexOrderFromDOM(this);
        const closeButton = document.querySelector(".modal-close-button");
        if (closeButton) {
          closeButton.click();
        }
        this.setHighlighted(false);
      }).setTooltip("Changes are stored to Vault/.obsidian/plugins/data.json");
      this.saveButton = button.buttonEl;
      this.setHighlighted(false);
    });
    new import_obsidian.Setting(containerEl).setName("Reset Defaults").addButton((button) => {
      button.setButtonText("Reset").onClick(() => {
        const resetConfirm = confirm("Are you sure you want to reset to default settings?");
        if (resetConfirm) {
          this.resetToDefaults();
          if (this.plugin._settingTabReference) {
            this.plugin._settingTabReference.display();
          }
          new import_obsidian.Notice("Settings have been reset to defaults.");
        }
      });
    });
    const updateHighlitedState = () => this.setHighlighted(true);
    keyValueContainer.addEventListener("input", updateHighlitedState);
    keyValueContainer.addEventListener("change", updateHighlitedState);
  }
  async resetToDefaults() {
    this.plugin.settings = DEFAULT_SETTINGS;
    await this.plugin.saveSettings();
    new import_obsidian.Notice("Settings have been reset to defaults.");
  }
};
function containsValidLink(line, match) {
  const linkRegex = /\[\[.*?\]\]/g;
  let result;
  while ((result = linkRegex.exec(line)) !== null) {
    if (result.index <= line.indexOf(match) && linkRegex.lastIndex >= line.indexOf(match) + match.length) {
      return true;
    }
  }
  return false;
}
var RelaxPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.progress = 0;
    this.mutex = new Mutex();
  }
  async onload() {
    await this.loadSettings();
    this._settingTabReference = new RelaxSettingTab(this.app, this);
    this.addSettingTab(this._settingTabReference);
    this.addCommand({ id: "Relax-command", name: "Relax", callback: () => this.addBrackets() });
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        menu.addItem((item) => {
          item.setTitle("R.E.L.A.X.").setIcon("curly-braces").onClick(async () => {
            this.addBrackets();
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        menu.addItem((item) => {
          item.setTitle("R.E.L.A.X.").setIcon("curly-braces").onClick(async () => {
            this.addBrackets();
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        menu.addItem((item) => {
          item.setTitle("Remove all brackets").setIcon("curly-braces").onClick(async () => {
            this.removeBrackets();
          });
        });
      })
    );
    this.registerEvent(this.app.workspace.on("settings:opened", () => {
      if (this._settingTabReference) {
        this._settingTabReference.setHighlighted(false);
      }
    }));
  }
  async resetToDefaults() {
    this.settings = DEFAULT_SETTINGS;
    await this.saveSettings();
    new import_obsidian.Notice("Settings have been reset to defaults.");
  }
  async loadSettings() {
    try {
      const loadedSettings = await this.loadData();
      if (loadedSettings) {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedSettings);
      } else {
        throw new Error("No settings loaded");
      }
    } catch (e) {
      await this.resetToDefaults();
    }
  }
  onunload() {
  }
  async saveSettings() {
    await this.saveData(this.settings);
    new import_obsidian.Notice("Config saved!");
  }
  removeBracketsInSelection(content) {
    return content.replace(/([^!])\[\[([^\]]+)\]\]/g, "$1$2");
  }
  async addBracketsForFile(noteFilePath = "") {
    await this.processFileContent(noteFilePath, (content) => this.updateSelection(content, this.settings));
  }
  async removeBracketsinFile(noteFilePath = "") {
    await this.processFileContent(noteFilePath, this.removeBracketsInSelection);
  }
  async processFileContent(noteFilePath, contentProcessor) {
    let noteFile;
    let fileContent = "";
    if (noteFilePath !== "") {
      noteFile = this.app.vault.getAbstractFileByPath(noteFilePath);
      if (!noteFile) {
        new import_obsidian.Notice(`No file found at the given path: ${noteFilePath}`);
        return;
      }
      fileContent = await this.app.vault.read(noteFile);
    } else {
      const leaf = this.app.workspace.activeLeaf || this.app.workspace.getLeaf();
      noteFile = this.app.workspace.getActiveFile();
      if (!noteFile && leaf.view.focusedItem && !leaf.view.focusedItem.collapsible) {
        noteFile = leaf.view.focusedItem.file;
      }
      if (!noteFile) {
        new import_obsidian.Notice("No file selected. Please select a markdown file from the editor or navigation bar.");
        return;
      }
      if (!(leaf.view instanceof import_obsidian.MarkdownView)) {
        new import_obsidian.Notice("Please open a markdown file or select a folder");
        return;
      }
      fileContent = await this.app.vault.read(noteFile);
    }
    const updatedContent = contentProcessor(fileContent);
    await this.app.vault.modify(noteFile, updatedContent);
  }
  updateSelection(content, settings) {
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    const excludedExtensions = /\.(exe|lnk|xls|md|sh|elf|bin|tmp|doc|odt|docx|pdf|yara|dll|txt)$/;
    const fangMap = {
      "[.]": ".",
      "[:]": ":"
    };
    if (settings.defangURLs) {
      content = content.replace(/\[\.\]|\[\:\]/g, (char) => fangMap[char]);
    }
    let updatedText = "";
    const lines = content.split("\n");
    let inCodeBlock = false;
    lines.forEach((line, index) => {
      if (settings.ignoreCodeBlocks && line.trim().startsWith("```")) {
        inCodeBlock = !inCodeBlock;
        updatedText += line + "\n";
        return;
      }
      if (inCodeBlock) {
        updatedText += line + "\n";
        return;
      }
      for (const { isActive, key, regex } of settings.regexPairs) {
        if (!isActive) {
          continue;
        }
        const compiledRegex = new RegExp(regex, "g");
        line = line.replace(compiledRegex, (match, ...args) => {
          const groups = args.slice(0, -2).filter((g) => g !== void 0);
          const capturedValue = groups[0];
          if (!capturedValue)
            return match;
          if (settings.ignoreLinks && containsValidLink(line, capturedValue)) {
            return match;
          }
          if (settings.ignoreURLs) {
            const urls = Array.from(line.matchAll(urlRegex), (m) => m[0]);
            let ignoreCurrentMatch = false;
            for (const url of urls) {
              if (!excludedExtensions.test(url) && url.includes(capturedValue)) {
                ignoreCurrentMatch = true;
                break;
              }
            }
            if (ignoreCurrentMatch) {
              return match;
            }
          }
          return match.replace(capturedValue, `[[${capturedValue}]]`);
        });
      }
      updatedText += line;
      if (index !== lines.length - 1) {
        updatedText += "\n";
      }
    });
    return updatedText;
  }
  async processMarkdownContent(action) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (!activeLeaf) {
      new import_obsidian.Notice("Please open a markdown file or select a folder");
      return;
    }
    const view = activeLeaf.view;
    if (!view) {
      new import_obsidian.Notice("Unknown item selected. Please select a markdown file or folder");
      return;
    }
    if (view instanceof import_obsidian.MarkdownView) {
      const selection = view.editor.getSelection();
      if (selection && selection.trim().length !== 0) {
        let updatedSelection;
        if (action === "removeBrackets") {
          updatedSelection = this.removeBracketsInSelection(selection);
          new import_obsidian.Notice("Removed brackets from selection!");
        } else {
          updatedSelection = this.updateSelection(selection, this.settings);
          new import_obsidian.Notice("Added brackets in selection!");
        }
        view.editor.replaceSelection(updatedSelection);
        new import_obsidian.Notice(action === "removeBrackets" ? "Removed brackets from selection!" : "Updated content in selection!");
      } else {
        if (action === "removeBrackets") {
          await this.removeBracketsinFile();
          new import_obsidian.Notice("Removed brackets from entire file!");
        } else {
          await this.addBracketsForFile();
          new import_obsidian.Notice("Added brackets on entire file!");
        }
      }
    }
  }
  async removeBrackets() {
    await this.processMarkdownContent("removeBrackets");
  }
  async addBrackets() {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (!activeLeaf) {
      new import_obsidian.Notice("Please open a markdown file or select a folder");
      return;
    }
    const view = activeLeaf.view;
    if (!view) {
      new import_obsidian.Notice("Unknown item selected. Please select a markdown file or folder");
      return;
    }
    if (view instanceof import_obsidian.MarkdownView) {
      const editor = view.editor;
      const selection = editor.getSelection();
      if (selection && selection.trim().length !== 0) {
        const updatedSelection = this.updateSelection(selection, this.settings);
        editor.replaceSelection(updatedSelection);
        new import_obsidian.Notice("Added brackets in selection!");
      } else {
        await this.addBracketsForFile();
        new import_obsidian.Notice("Updated entire file!");
      }
    } else if (view.focusedItem && view.focusedItem.collapsible) {
      const folderPath = view.focusedItem.file.path;
      await this.addBracketsForFolder(folderPath);
    } else if (view.focusedItem && !view.focusedItem.collapsible) {
      const filePath = view.focusedItem.file.path;
      await this.addBracketsForFile(filePath);
    } else {
      new import_obsidian.Notice("No markdown file or folder is currently selected. Please select one.");
    }
  }
  async addBracketsForFolder(folderPath) {
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.startsWith(folderPath));
    const totalFiles = files.length;
    let processedFiles = 0;
    let processingNotice = new import_obsidian.Notice(`Processing ${totalFiles} files...`, totalFiles * 1e3);
    const taskQueue = files.map((file) => () => this.addBracketsForFile(file.path).then(() => {
      processedFiles++;
      processingNotice.setMessage(`Processing file ${processedFiles} of ${totalFiles}`);
    }));
    const processQueue = async () => {
      if (taskQueue.length === 0)
        return;
      await taskQueue.shift()();
    };
    const maxConcurrentTasks = 200;
    const promises = Array(Math.min(maxConcurrentTasks, taskQueue.length)).fill(null).map(processQueue);
    await Promise.all(promises);
    processingNotice.hide();
    new import_obsidian.Notice(`All ${totalFiles} files in the folder processed.`);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtBcHAsIE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgUmVsYXhQbHVnaW5TZXR0aW5ncyB7XHJcblx0cmVnZXhQYWlyczogQXJyYXk8eyBpc0FjdGl2ZTogYm9vbGVhbiwga2V5OiBzdHJpbmcsIHJlZ2V4OiBzdHJpbmcsIH0+O1xyXG5cdGlnbm9yZUxpbmtzPzogYm9vbGVhbjtcclxuXHRpZ25vcmVVUkxzPzogYm9vbGVhbjtcclxuXHRkZWZhbmdVUkxzPzogYm9vbGVhbjtcclxuXHRpZ25vcmVDb2RlQmxvY2tzPzogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUmVsYXhQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRcInJlZ2V4UGFpcnNcIjogW1xyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiRG9tYWluc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiKFthLXpBLVowLTlcXFxcLVxcXFwuXStcXFxcLig/OmNvbXxvcmd8bmV0fG1pbHxlZHV8Q09NfE9SR3xORVR8TUlMfEVEVSkpXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJJUFwiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiKCg/Oig/Oig/ITE/Mj83XFxcXC4wXFxcXC4wXFxcXC4xKSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXFxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pKSlcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcImVNYWlsXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIoW0EtWmEtejAtOS5fJSstXStAW0EtWmEtejAtOS4tXStcXFxcLltBLVp8YS16XXsyLH0pXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJHVUlEXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIoW0EtRmEtZjAtOV17OH0tW0EtRmEtZjAtOV17NH0tW0EtRmEtZjAtOV17NH0tW0EtRmEtZjAtOV17NH0tW0EtRmEtZjAtOV17MTJ9KVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiU0hBMjU2XCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCJcXFxcYihbYS1mQS1GMC05XXs2NH0pXFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIkpBUk1cIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIlxcXFxiKFthLWZBLUYwLTldezYyfSlcXFxcYlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiU0hBMVwiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXFxcXGIoW2EtZkEtRjAtOV17NDB9KVxcXFxiXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJNRDVcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIlxcXFxiKFthLWZBLUYwLTldezMyfSlcXFxcYlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiQml0Y29pblwiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXFxcXGIoWzEzXXsxfVthLWttLXpBLUhKLU5QLVoxLTldezI2LDMzfXxiYzFbYS16MC05XXszOSw1OX0pXFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIkRhdGVcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIigoPzowWzEtOV18WzEyXVswLTldfDNbMDFdKVtcXFxcXFxcXFxcXFwvXFxcXC4tXSg/OjBbMS05XXwxWzAxMl0pW1xcXFxcXFxcXFxcXC9cXFxcLi1dKD86MTl8MjB8KVxcXFxkXFxcXGQpXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJXaW5kb3dzIFVzZXJuYW1lc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXFxcXFxcXFxVc2Vyc1xcXFxcXFxcKyg/ISg/OlB1YmxpY3xBZG1pbmlzdHJhdG9yKVxcXFxcXFxcKShbXlxcXFxcXFxcXSspXFxcXFxcXFxcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIk1hcmtkb3duLUl0YWxpY1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiKD86W1x1MDBCNCdcdTIwMThcdTIwMTldKCgoPzooPyE8YnI+fFxcXFxyfFxcXFxuKVteXHUwMEI0XHUyMDE5XHUyMDE4JyBdKXs0LDMwfSkpW1x1MDBCNFx1MjAxOVx1MjAxOCddfCg/OltcXFwiXHUyMDFDXSgoPzooPyE8YnI+fFxcXFxyfFxcXFxuKVteXFxcIlx1MjAxRF0pezQsNTB9KVtcXFwiXHUyMDFEXSl8KD86W19dKCg/Oig/ITxicj58XFxcXHJ8XFxcXG4pW15fXSl7NCw1MH0pW19dKSlcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIlF1b3Rlcy1ERVwiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXHUyMDFFKFteXFxcXFxcXCJdKyl7NSw2Nn1bXFxcInxcXFwiXVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiV2luZG93cyBGb3JlbnNpY3NcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddKy4oPzpiYXR8cHMxfGRsbHxleGV8cmVnKSlbXFxcXGJdXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJMaW51eCBGb3JlbnNpY3NcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddK1xcXFwuKD86c2h8c298Y29uZnx0YXIuZ3opKVtcXFxcYl1cIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIk1hYyBGb3JlbnNpY3NcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddK1xcXFwuKD86YXBwfHBrZ3xkbWcpKVtcXFxcYl1cIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIlNpZ25hbCBGcmVxdWVuY2llc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiKFxcXFxiWzAtOV17MSw0fSg/OlxcXFwuXFxcXGR7MSw0fSk/XFxcXHM/KEh6fGtIenxNSHp8R0h6KVxcXFxiKVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiQmliVGVYIEVudHJpZXNcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIkAoYXJ0aWNsZXxib29rfGluYm9va3xjb25mZXJlbmNlfGlucHJvY2VlZGluZ3MpeyhbXn1dKyl9XCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJHUFMgQ29vcmRpbmF0ZXNcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIlxcXFxiWystXT9bMC05XXsxLDJ9XFxcXC5bMC05XSssXFxcXHMqWystXT9bMC05XXsxLDN9XFxcXC5bMC05XStcXFxcYlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiSVNCTiBOdW1iZXJzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCJcXFxcYklTQk5cXFxccz8oPzotPzEzfC0xMCk/Oj9cXFxccz9bMC05LV17MTAsMTd9XFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIkNhbWVyYSBTZXR0aW5nc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXFxcXGJJU09cXFxccz9bMC05XSt8Zi9bMC05Ll0rfDEvWzAtOV0rXFxcXHM/c2VjXFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIkhpc3RvcmljYWwgRGF0ZXNcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIlxcXFxiKD86WzAtOV17MSw0fSAoQUR8QkMpfFswLTldezEsNH10aCBjZW50dXJ5KVxcXFxiXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJQcm9jZXNzb3IgU3BlY3NcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIlxcXFxiSW50ZWwgQ29yZSBpWzM1NzldLVswLTldezR9W0hRR1VdSz98QU1EIFJ5emVuIFszNTc5XSBbMC05XXs0fVg/XFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiB0cnVlLFxyXG5cdFx0XHRcImtleVwiOiBcIkltYWdlc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiKFtcXFxcd10rXFxcXC4oPzpqcGd8anBlZ3xwbmd8Z2lmfGJtcHx0aWZmKSlbXFxcXGJdXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogdHJ1ZSxcclxuXHRcdFx0XCJrZXlcIjogXCJNb3ZpZXNcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddK1xcXFwuKD86bXA0fGF2aXxta3Z8bW92fHdtdikpW1xcXFxiXVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IHRydWUsXHJcblx0XHRcdFwia2V5XCI6IFwiQXVkaW9cIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddK1xcXFwuKD86bXAzfHdhdnxhYWN8ZmxhYykpW1xcXFxiXVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IGZhbHNlLFxyXG5cdFx0XHRcImtleVwiOiBcIkhhcm1sZXNzIEZpbGVzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIoW1xcXFx3XStcXFxcLig/OnR4dHxhc2N8Y3N2fGxvZ3xtZCkpW1xcXFxiXVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IGZhbHNlLFxyXG5cdFx0XHRcImtleVwiOiBcIkJhc2U2NCBTdHJpbmdzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIoW0EtWmEtejAtOSsvXXs0fSkqKFtBLVphLXowLTkrL117Mn09PXxbQS1aYS16MC05Ky9dezN9PSk/XCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogZmFsc2UsXHJcblx0XHRcdFwia2V5XCI6IFwiU2NyaXB0IExhbmd1YWdlIEZpbGVcIixcclxuXHRcdFx0XCJyZWdleFwiOiBcIihbXFxcXHddK1xcXFwuKD86cHl8anN8amF2YXxjc3xjcHB8cmJ8Z298cGhwKSlbXFxcXGJdXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogZmFsc2UsXHJcblx0XHRcdFwia2V5XCI6IFwiQ2hvcmQgUHJvZ3Jlc3Npb25zXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCJcXFxcYigoPzpDfERtfEVtfEZ8R3xBbXxCZGltKSg/OlxcXFxzLT5cXFxccyg/OkN8RG18RW18RnxHfEFtfEJkaW0pKSopXFxcXGJcIlxyXG5cdFx0fSxcclxuXHRcdHtcclxuXHRcdFx0XCJpc0FjdGl2ZVwiOiBmYWxzZSxcclxuXHRcdFx0XCJrZXlcIjogXCJIZXggQ29sb3JzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIjKFthLWZBLUYwLTldezZ9fFthLWZBLUYwLTldezN9KVwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IGZhbHNlLFxyXG5cdFx0XHRcImtleVwiOiBcIkNoZW1pY2FsIEVsZW1lbnRzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCJcXFxcYig/Okh8SGV8TGl8QmV8QnxDfE58T3xGfE5lfE5hfE1nfEFsfFNpfFB8U3xDbHxBcnxLfENhKVxcXFxiXCJcclxuXHRcdH0sXHJcblx0XHR7XHJcblx0XHRcdFwiaXNBY3RpdmVcIjogZmFsc2UsXHJcblx0XHRcdFwia2V5XCI6IFwiU29jaWFsIE1lZGlhIEhhc2h0YWdzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCIjW0EtWmEtejAtOV9dK1wiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IGZhbHNlLFxyXG5cdFx0XHRcImtleVwiOiBcIkFjYWRlbWljIENpdGF0aW9uc1wiLFxyXG5cdFx0XHRcInJlZ2V4XCI6IFwiXFxcXGJcXFxcKFtBLVphLXpdKyxcXFxcc1swLTldezR9XFxcXClcXFxcYlwiXHJcblx0XHR9LFxyXG5cdFx0e1xyXG5cdFx0XHRcImlzQWN0aXZlXCI6IGZhbHNlLFxyXG5cdFx0XHRcImtleVwiOiBcIlRlbXBlcmF0dXJlIFJlYWRpbmdzXCIsXHJcblx0XHRcdFwicmVnZXhcIjogXCJcXFxcYi0/WzAtOV0rXFxcXHM/KFx1MDBCMEN8XHUwMEIwRnxLKVxcXFxiXCJcclxuXHRcdH1cclxuXHRdLFxyXG5cdGlnbm9yZUxpbmtzOiB0cnVlLFxyXG5cdGlnbm9yZUNvZGVCbG9ja3M6IHRydWUsXHJcblx0ZGVmYW5nVVJMczogdHJ1ZSxcclxuXHRpZ25vcmVVUkxzOiBmYWxzZVxyXG59O1xyXG5cclxuY2xhc3MgTXV0ZXgge1xyXG5cdHByaXZhdGUgX3Byb21pc2U6IFByb21pc2U8dm9pZD4gfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIF9yZXNvbHZlOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuXHJcblx0YXN5bmMgbG9jaygpIHtcclxuXHRcdGlmICh0aGlzLl9wcm9taXNlKSBhd2FpdCB0aGlzLl9wcm9taXNlO1xyXG5cdFx0dGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdHRoaXMuX3Jlc29sdmUgPSByZXNvbHZlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1bmxvY2soKSB7XHJcblx0XHRpZiAodGhpcy5fcmVzb2x2ZSkge1xyXG5cdFx0XHR0aGlzLl9yZXNvbHZlKCk7XHJcblx0XHRcdHRoaXMuX3Jlc29sdmUgPSBudWxsO1xyXG5cdFx0XHR0aGlzLl9wcm9taXNlID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHJ1bkV4Y2x1c2l2ZTxUPihjYWxsYmFjazogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2NrKCk7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZXR1cm4gYXdhaXQgY2FsbGJhY2soKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdHRoaXMudW5sb2NrKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBSZWxheFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IFJlbGF4UGx1Z2luO1xyXG5cdGtleVZhbHVlQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcclxuXHRzYXZlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRpc0hpZ2hsaXRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBSZWxheFBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRzZXRIaWdobGlnaHRlZChoaWdobGlnaHQ6IGJvb2xlYW4pIHtcclxuXHRcdHRoaXMuaXNIaWdobGl0ZWQgPSBoaWdobGlnaHQ7XHJcblx0XHRpZiAodGhpcy5zYXZlQnV0dG9uKSB7XHJcblx0XHRcdHRoaXMuc2F2ZUJ1dHRvbi5kaXNhYmxlZCA9ICFoaWdobGlnaHQ7XHJcblx0XHRcdGlmIChoaWdobGlnaHQpIHtcclxuXHRcdFx0XHR0aGlzLnNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtaGlnaGxpZ2h0Jyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5zYXZlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhpZ2hsaWdodCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdGRpc3BsYXkoKSB7XHJcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRjb25zdCBrZXlWYWx1ZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGl2XCIpO1xyXG5cdFx0a2V5VmFsdWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHRcdGtleVZhbHVlQ29udGFpbmVyLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcclxuXHJcblx0XHRmdW5jdGlvbiB2YWxpZGF0ZUNvbnRlbnQoY29udGVudCkge1xyXG5cdFx0XHRjb25zdCByZWdleCA9IC9cXFtcXFsoLis/KVxcXVxcXS9nO1xyXG5cdFx0XHRyZXR1cm4gIXJlZ2V4LnRlc3QoY29udGVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gYXBwbHlWYWxpZGF0aW9uU3R5bGUodGV4dGFyZWEpIHtcclxuXHRcdFx0aWYgKHZhbGlkYXRlQ29udGVudCh0ZXh0YXJlYS52YWx1ZSkpIHtcclxuXHRcdFx0XHRjb25zdCBhY2NlbnRDb2xvciA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KVxyXG5cdFx0XHRcdFx0LmdldFByb3BlcnR5VmFsdWUoJy0tY29sb3ItYWNjZW50JykudHJpbSgpO1xyXG5cdFx0XHRcdHRleHRhcmVhLnN0eWxlLmJvcmRlckNvbG9yID0gYWNjZW50Q29sb3JcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0ZXh0YXJlYS5zdHlsZS5ib3JkZXJDb2xvciA9IFwicmVkXCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGNvbnN0IG1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvcGVuTW9kYWxCdXR0b25cIik7XHJcblxyXG5cdFx0XHRtb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcblx0XHRcdFx0Y29uc3QgdGV4dGFyZWEgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIik7XHJcblxyXG5cdFx0XHRcdGFwcGx5VmFsaWRhdGlvblN0eWxlKHRleHRhcmVhKTtcclxuXHJcblx0XHRcdFx0dGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRhcHBseVZhbGlkYXRpb25TdHlsZSh0ZXh0YXJlYSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3QgdmFsaWRhdGVSZWdleElucHV0ID0gKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XHJcblx0XHRcdGxldCBlcnJvck1zZyA9ICcnO1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGxldCByZWcgPSBuZXcgUmVnRXhwKGlucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRsZXQgZ3JvdXBDb3VudCA9IChpbnB1dC52YWx1ZS5tYXRjaCgvXFwoKD8hXFw/KS9nKSB8fCBbXSkubGVuZ3RoO1xyXG5cdFx0XHRcdGlmIChncm91cENvdW50ID4gMSkge1xyXG5cdFx0XHRcdFx0aW5wdXQuc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCByZWQnO1xyXG5cdFx0XHRcdFx0ZXJyb3JNc2cgPSAnTW9yZSB0aGFuIG9uZSBncm91cCBkZXRlY3RlZC4nO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpbnB1dC5zdHlsZS5ib3JkZXIgPSAnJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0XHRpbnB1dC5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHJlZCc7XHJcblx0XHRcdFx0ZXJyb3JNc2cgPSAnSW52YWxpZCByZWdleC4nO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dC5uZXh0U2libGluZztcclxuXHRcdFx0aWYgKGVycm9yRWxlbWVudCAmJiBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWdleC1lcnJvcicpKSB7XHJcblx0XHRcdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNc2c7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdFx0XHRzcGFuLmNsYXNzTmFtZSA9ICdyZWdleC1lcnJvcic7XHJcblx0XHRcdFx0c3Bhbi50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xyXG5cdFx0XHRcdGlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNwYW4sIGlucHV0Lm5leHRTaWJsaW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGFkZEtleVZhbHVlID0gKGtleT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcsIGlzQWN0aXZlOiBib29sZWFuID0gZmFsc2UpID0+IHtcclxuXHRcdFx0Y29uc3Qgcm93ID0ga2V5VmFsdWVDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIik7XHJcblx0XHRcdHJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG5cdFx0XHRyb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xyXG5cdFx0XHRyb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7IC8vIEFkZCBzcGFjZSBiZXR3ZWVuIGl0ZW1zXHJcblxyXG5cdFx0XHRjb25zdCBkcmFnSGFuZGxlID0gcm93LmNyZWF0ZUVsKFwic3BhblwiLCB7Y2xhc3NOYW1lOiBcImRyYWctaGFuZGxlXCIsIHRleHQ6IFwiXHUyNjMwXCJ9KTtcclxuXHRcdFx0Y29uc3QgYWN0aXZlQ2hlY2tib3ggPSByb3cuY3JlYXRlRWwoXCJpbnB1dFwiLCB7Y2xhc3NOYW1lOiBcImFjdGl2ZS1jaGVja2JveFwifSk7XHJcblx0XHRcdGFjdGl2ZUNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XHJcblx0XHRcdGFjdGl2ZUNoZWNrYm94LmNoZWNrZWQgPSBpc0FjdGl2ZTtcclxuXHRcdFx0cm93LmFwcGVuZENoaWxkKGFjdGl2ZUNoZWNrYm94KTtcclxuXHJcbi8vIEtleSBpbnB1dFxyXG5cdFx0XHRjb25zdCBrZXlJbnB1dCA9IHJvdy5jcmVhdGVFbChcImlucHV0XCIsIHtjbGFzc05hbWU6IFwia2V5LWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcIkRlc2NyaXB0aW9uLUtleVwiLCB2YWx1ZToga2V5ID8/ICcnfSk7XHJcblx0XHRcdGtleUlucHV0LnN0eWxlLmZsZXggPSAnMSc7IC8vIEFsbG93IHRoaXMgdG8gZ3Jvd1xyXG5cdFx0XHRrZXlJbnB1dC5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4JztcclxuXHJcbi8vIFZhbHVlIGlucHV0XHJcblx0XHRcdGNvbnN0IHZhbHVlSW5wdXQgPSByb3cuY3JlYXRlRWwoXCJpbnB1dFwiLCB7Y2xhc3NOYW1lOiBcInZhbHVlLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcIlJlZ2V4cFwiLCB2YWx1ZTogdmFsdWUgPz8gJyd9KTtcclxuXHRcdFx0dmFsdWVJbnB1dC5zdHlsZS5mbGV4ID0gJzInOyAvLyBBbGxvdyB0aGlzIHRvIGdyb3cgbW9yZSB0aGFuIHRoZSBrZXkgaW5wdXRcclxuXHRcdFx0dmFsdWVJbnB1dC5zdHlsZS5tYXJnaW5SaWdodCA9ICcxMHB4JztcclxuXHJcblx0XHRcdHJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7dGV4dDogXCJEZWxldGVcIiwgY2xhc3NOYW1lOiBgZGVsZXRlLWJ1dHRvbi0ke2tleSA/PyBEYXRlLm5vdygpfWB9KVxyXG5cdFx0XHRcdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdFx0cm93LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0dXBkYXRlUmVnZXhPcmRlckZyb21ET00uY2FsbCh0aGlzKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmIChkcmFnSGFuZGxlKSBtYWtlRHJhZ2dhYmxlKHJvdywgZHJhZ0hhbmRsZSk7XHJcblx0XHRcdHZhbHVlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB2YWxpZGF0ZVJlZ2V4SW5wdXQodmFsdWVJbnB1dCkpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7dGV4dDogXCJBZGQgUmVnZXhwXCJ9KS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkS2V5VmFsdWUoKSk7XHJcblxyXG5cdFx0Zm9yIChjb25zdCB7aXNBY3RpdmUsIGtleSwgcmVnZXh9IG9mIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZ2V4UGFpcnMpIHtcclxuXHRcdFx0YWRkS2V5VmFsdWUoa2V5LCByZWdleCwgaXNBY3RpdmUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBzdGFydFkgPSAwO1xyXG5cdFx0bGV0IHN0YXJ0VG9wID0gMDtcclxuXHRcdGxldCBpbml0aWFsT2Zmc2V0WSA9IDBcclxuXHJcblx0XHRmdW5jdGlvbiB1cGRhdGVSZWdleE9yZGVyRnJvbURPTShwbHVnaW5PYmopIHtcclxuXHJcblx0XHRcdGNvbnN0IHJlZ2V4UGFpcnMgPSBbXTtcclxuXHRcdFx0a2V5VmFsdWVDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcImRpdlwiKS5mb3JFYWNoKHJvdyA9PiB7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUNoZWNrYm94SW5wdXQgPSByb3cucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcblx0XHRcdFx0Y29uc3Qga2V5SW5wdXQgPSByb3cucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXI9XCJEZXNjcmlwdGlvbi1LZXlcIl0nKTtcclxuXHRcdFx0XHRjb25zdCB2YWx1ZUlucHV0ID0gcm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyPVwiUmVnZXhwXCJdJyk7XHJcblxyXG5cclxuXHRcdFx0XHRpZiAoa2V5SW5wdXQgJiYgdmFsdWVJbnB1dCAmJiBhY3RpdmVDaGVja2JveElucHV0KSB7XHJcblx0XHRcdFx0XHRjb25zdCBrZXkgPSBrZXlJbnB1dC52YWx1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdmFsdWVJbnB1dC52YWx1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzQWN0aXZlID0gYWN0aXZlQ2hlY2tib3hJbnB1dC5jaGVja2VkO1xyXG5cdFx0XHRcdFx0cmVnZXhQYWlycy5wdXNoKHtpc0FjdGl2ZSwga2V5LCByZWdleDogdmFsdWV9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAocGx1Z2luT2JqLnBsdWdpbiAmJiBwbHVnaW5PYmoucGx1Z2luLnNldHRpbmdzKSB7XHJcblx0XHRcdFx0cGx1Z2luT2JqLnBsdWdpbi5zZXR0aW5ncy5yZWdleFBhaXJzID0gcmVnZXhQYWlycztcclxuXHRcdFx0XHRwbHVnaW5PYmoucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJQbHVnaW4gb3Igc2V0dGluZ3Mgbm90IGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBkcmFnRWxlbWVudCA9IG51bGw7XHJcblx0XHRsZXQgY3VycmVudEluZGV4ID0gbnVsbDtcclxuXHRcdGxldCBuZXdJbmRleCA9IG51bGw7XHJcblxyXG5cdFx0ZnVuY3Rpb24gbWFrZURyYWdnYWJsZShlbGVtZW50LCBkcmFnSGFuZGxlKSB7XHJcblx0XHRcdGlmICghZHJhZ0hhbmRsZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJEcmFnIGhhbmRsZSBub3QgZm91bmQhXCIsIGVsZW1lbnQuaW5uZXJIVE1MKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRyYWdIYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZ3NDb250YWluZXJUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZlcnRpY2FsLXRhYi1jb250ZW50LWNvbnRhaW5lclwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcblx0XHRcdFx0Y29uc3QgZWxlbWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHRcdGluaXRpYWxPZmZzZXRZID0gZS5jbGllbnRZIC0gZWxlbWVudFJlY3QudG9wICsgc2V0dGluZ3NDb250YWluZXJUb3A7XHJcblx0XHRcdFx0Y3VycmVudEluZGV4ID0gWy4uLmVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uaW5kZXhPZihlbGVtZW50KTtcclxuXHJcblx0XHRcdFx0ZHJhZ0VsZW1lbnQgPSBlbGVtZW50O1xyXG5cdFx0XHRcdGRyYWdFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcxMDAwJztcclxuXHRcdFx0XHRkcmFnRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblxyXG5cdFx0XHRcdGNvbnN0IG5ld1RvcCA9IGUuY2xpZW50WSAtIGluaXRpYWxPZmZzZXRZO1xyXG5cdFx0XHRcdGRyYWdFbGVtZW50LnN0eWxlLnRvcCA9IGAke25ld1RvcH1weGA7XHJcblxyXG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uRHJhZ01vdmUpO1xyXG5cdFx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkRyYWdFbmQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBvbkRyYWdNb3ZlKGUpIHtcclxuXHRcdFx0aWYgKGRyYWdFbGVtZW50KSB7XHJcblx0XHRcdFx0Y29uc3QgbmV3VG9wID0gZS5jbGllbnRZIC0gaW5pdGlhbE9mZnNldFk7XHJcblx0XHRcdFx0ZHJhZ0VsZW1lbnQuc3R5bGUudG9wID0gYCR7bmV3VG9wfXB4YDtcclxuXHJcblx0XHRcdFx0bmV3SW5kZXggPSBudWxsO1xyXG5cdFx0XHRcdGxldCBjbG9zZXN0RGlzdGFuY2UgPSBJbmZpbml0eTtcclxuXHRcdFx0XHRbLi4uZHJhZ0VsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbl0uZm9yRWFjaCgoY2hpbGQsIGlkeCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGNoaWxkICE9PSBkcmFnRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCByZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIgLSBlLmNsaWVudFkpO1xyXG5cdFx0XHRcdFx0XHRpZiAoZGlzdGFuY2UgPCBjbG9zZXN0RGlzdGFuY2UpIHtcclxuXHRcdFx0XHRcdFx0XHRjbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuXHRcdFx0XHRcdFx0XHRuZXdJbmRleCA9IGlkeDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gb25EcmFnRW5kKCkge1xyXG5cdFx0XHRpZiAoZHJhZ0VsZW1lbnQpIHtcclxuXHRcdFx0XHRkcmFnRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICcnO1xyXG5cdFx0XHRcdGRyYWdFbGVtZW50LnN0eWxlLnRvcCA9ICcnO1xyXG5cdFx0XHRcdGRyYWdFbGVtZW50LnN0eWxlLnpJbmRleCA9ICcnO1xyXG5cclxuXHRcdFx0XHRpZiAobmV3SW5kZXggIT09IG51bGwgJiYgY3VycmVudEluZGV4ICE9PSBudWxsICYmIG5ld0luZGV4ICE9PSBjdXJyZW50SW5kZXgpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IGRyYWdFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRpZiAobmV3SW5kZXggPj0gcGFyZW50LmNoaWxkcmVuLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRwYXJlbnQuYXBwZW5kQ2hpbGQoZHJhZ0VsZW1lbnQpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZShkcmFnRWxlbWVudCwgcGFyZW50LmNoaWxkcmVuW25ld0luZGV4ICsgKG5ld0luZGV4ID4gY3VycmVudEluZGV4ID8gMSA6IDApXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkcmFnRWxlbWVudCA9IG51bGw7XHJcblx0XHRcdFx0dXBkYXRlUmVnZXhPcmRlckZyb21ET00uY2FsbCh0aGlzKTtcclxuXHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkRyYWdNb3ZlKTtcclxuXHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25EcmFnRW5kKTtcclxuXHRcdFx0XHRyZW9yZGVyRWxlbWVudHMoKTtcclxuXHRcdFx0XHRjdXJyZW50SW5kZXggPSBudWxsO1xyXG5cdFx0XHRcdG5ld0luZGV4ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHJlb3JkZXJFbGVtZW50cygpIHtcclxuXHRcdFx0a2V5VmFsdWVDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcImRpdlwiKS5mb3JFYWNoKChyb3cpID0+IHtcclxuXHRcdFx0XHRyb3cuc3R5bGUudG9wID0gJyc7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdJZ25vcmUgTGlua3MnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlTGlua3MgPz8gdHJ1ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZUxpbmtzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiRG8gbm90IG1vZGlmeSBMaW5rcywgcHJldmVudGluZyB0byBoYW5kbGUgdGhlIHNhbWUgZGF0YSBvdmVyIGFuZCBvdmVyIGFnYWluLlwiKVxyXG5cdFx0XHRcdDtcclxuXHRcdFx0fSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0lnbm9yZSBVUkxzJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZVVSTHMgPz8gdHJ1ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZVVSTHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJEbyBub3QgbW9kaWZ5IFVSTHMsIHNvIHRoZXkgZG8ga2VlcCB3b3JraW5nLlwiKVxyXG5cdFx0XHRcdDtcclxuXHRcdFx0fSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0RlZmFuZyBVUkxzJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmFuZ1VSTHMgPz8gdHJ1ZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmFuZ1VSTHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJodHRwc1s6XS8vIC0+IGh0dHBzOi8vXCIpXHJcblx0XHRcdFx0O1xyXG5cdFx0XHR9KTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnSWdub3JlIENvZGUgQmxvY2tzJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZUNvZGVCbG9ja3MgPz8gZmFsc2UpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVDb2RlQmxvY2tzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiSWdub3JlIGNvbnRlbnQgd2l0aGluIGNvZGUgYmxvY2tzIHdoZW4gbGlua2luZyByZWdleGVzLlwiKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiU2F2ZVwiKVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XHJcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJTYXZlXCIpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHVwZGF0ZVJlZ2V4T3JkZXJGcm9tRE9NKHRoaXMpXHJcblx0XHRcdFx0XHRcdGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNsb3NlLWJ1dHRvbicpO1xyXG5cdFx0XHRcdFx0XHRpZiAoY2xvc2VCdXR0b24pIHtcclxuXHRcdFx0XHRcdFx0XHRjbG9zZUJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHRoaXMuc2V0SGlnaGxpZ2h0ZWQoZmFsc2UpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiQ2hhbmdlcyBhcmUgc3RvcmVkIHRvIFZhdWx0Ly5vYnNpZGlhbi9wbHVnaW5zL2RhdGEuanNvblwiKTtcclxuXHRcdFx0XHR0aGlzLnNhdmVCdXR0b24gPSBidXR0b24uYnV0dG9uRWw7XHJcblx0XHRcdFx0dGhpcy5zZXRIaWdobGlnaHRlZChmYWxzZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiUmVzZXQgRGVmYXVsdHNcIilcclxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiUmVzZXRcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRDb25maXJtID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZXNldCB0byBkZWZhdWx0IHNldHRpbmdzP1wiKTtcclxuXHRcdFx0XHRcdFx0aWYgKHJlc2V0Q29uZmlybSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVzZXRUb0RlZmF1bHRzKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5fc2V0dGluZ1RhYlJlZmVyZW5jZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uX3NldHRpbmdUYWJSZWZlcmVuY2UuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdTZXR0aW5ncyBoYXZlIGJlZW4gcmVzZXQgdG8gZGVmYXVsdHMuJyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdGNvbnN0IHVwZGF0ZUhpZ2hsaXRlZFN0YXRlID0gKCkgPT4gdGhpcy5zZXRIaWdobGlnaHRlZCh0cnVlKTtcclxuXHRcdGtleVZhbHVlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlSGlnaGxpdGVkU3RhdGUpO1xyXG5cdFx0a2V5VmFsdWVDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlSGlnaGxpdGVkU3RhdGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVzZXRUb0RlZmF1bHRzKCkge1xyXG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblxyXG5cdFx0bmV3IE5vdGljZSgnU2V0dGluZ3MgaGF2ZSBiZWVuIHJlc2V0IHRvIGRlZmF1bHRzLicpO1xyXG5cdH1cclxufVxyXG5cdGZ1bmN0aW9uIGNvbnRhaW5zVmFsaWRMaW5rKGxpbmU6IHN0cmluZywgbWF0Y2g6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWy4qP1xcXVxcXS9nO1xyXG5cdFx0bGV0IHJlc3VsdDtcclxuXHRcdHdoaWxlICgocmVzdWx0ID0gbGlua1JlZ2V4LmV4ZWMobGluZSkpICE9PSBudWxsKSB7XHJcblx0XHRcdGlmIChyZXN1bHQuaW5kZXggPD0gbGluZS5pbmRleE9mKG1hdGNoKSAmJiBsaW5rUmVnZXgubGFzdEluZGV4ID49IGxpbmUuaW5kZXhPZihtYXRjaCkgKyBtYXRjaC5sZW5ndGgpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbGF4UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogUmVsYXhQbHVnaW5TZXR0aW5ncztcclxuXHRfc2V0dGluZ1RhYlJlZmVyZW5jZTogUmVsYXhTZXR0aW5nVGFiO1xyXG5cclxuYXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHR0aGlzLl9zZXR0aW5nVGFiUmVmZXJlbmNlID0gbmV3IFJlbGF4U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcyk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKHRoaXMuX3NldHRpbmdUYWJSZWZlcmVuY2UpO1xyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtpZDogJ1JlbGF4LWNvbW1hbmQnLCBuYW1lOiAnUmVsYXgnLCBjYWxsYmFjazogKCkgPT4gdGhpcy5hZGRCcmFja2V0cygpfSk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGUtbWVudVwiLCAobWVudSwgZmlsZSkgPT4ge1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUoXCJSLkUuTC5BLlguXCIpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKFwiY3VybHktYnJhY2VzXCIpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZEJyYWNrZXRzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZWRpdG9yLW1lbnVcIiwgKG1lbnUsIGVkaXRvciwgdmlldykgPT4ge1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUoXCJSLkUuTC5BLlguXCIpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKFwiY3VybHktYnJhY2VzXCIpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZEJyYWNrZXRzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZWRpdG9yLW1lbnVcIiwgKG1lbnUsIGVkaXRvciwgdmlldykgPT4ge1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0XHQuc2V0VGl0bGUoXCJSZW1vdmUgYWxsIGJyYWNrZXRzXCIpXHJcblx0XHRcdFx0XHRcdC5zZXRJY29uKFwiY3VybHktYnJhY2VzXCIpXHJcblx0XHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbW92ZUJyYWNrZXRzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0KTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJzZXR0aW5nczpvcGVuZWRcIiwgKCkgPT4ge1xyXG5cdFx0aWYgKHRoaXMuX3NldHRpbmdUYWJSZWZlcmVuY2UpIHtcclxuXHRcdFx0dGhpcy5fc2V0dGluZ1RhYlJlZmVyZW5jZS5zZXRIaWdobGlnaHRlZChmYWxzZSk7XHJcblx0XHR9XHJcblx0fSkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVzZXRUb0RlZmF1bHRzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IERFRkFVTFRfU0VUVElOR1M7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0bmV3IE5vdGljZSgnU2V0dGluZ3MgaGF2ZSBiZWVuIHJlc2V0IHRvIGRlZmF1bHRzLicpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgbG9hZGVkU2V0dGluZ3MgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcblx0XHRcdGlmIChsb2FkZWRTZXR0aW5ncykge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWRTZXR0aW5ncyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gc2V0dGluZ3MgbG9hZGVkXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMucmVzZXRUb0RlZmF1bHRzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0XHRuZXcgTm90aWNlKCdDb25maWcgc2F2ZWQhJyk7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVCcmFja2V0c0luU2VsZWN0aW9uKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gY29udGVudC5yZXBsYWNlKC8oW14hXSlcXFtcXFsoW15cXF1dKylcXF1cXF0vZywgJyQxJDInKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFkZEJyYWNrZXRzRm9yRmlsZShub3RlRmlsZVBhdGggPSBcIlwiKSB7XHJcblx0XHRhd2FpdCB0aGlzLnByb2Nlc3NGaWxlQ29udGVudChub3RlRmlsZVBhdGgsIChjb250ZW50KSA9PiB0aGlzLnVwZGF0ZVNlbGVjdGlvbihjb250ZW50LCB0aGlzLnNldHRpbmdzKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZW1vdmVCcmFja2V0c2luRmlsZShub3RlRmlsZVBhdGggPSBcIlwiKSB7XHJcblx0XHRhd2FpdCB0aGlzLnByb2Nlc3NGaWxlQ29udGVudChub3RlRmlsZVBhdGgsIHRoaXMucmVtb3ZlQnJhY2tldHNJblNlbGVjdGlvbik7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwcm9jZXNzRmlsZUNvbnRlbnQobm90ZUZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnRQcm9jZXNzb3I6IChjb250ZW50OiBzdHJpbmcpID0+IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0bGV0IG5vdGVGaWxlO1xyXG5cclxuXHRcdGxldCBmaWxlQ29udGVudCA9IFwiXCI7XHJcblxyXG5cdFx0aWYgKG5vdGVGaWxlUGF0aCAhPT0gXCJcIikge1xyXG5cdFx0XHRub3RlRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub3RlRmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoIW5vdGVGaWxlKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZShgTm8gZmlsZSBmb3VuZCBhdCB0aGUgZ2l2ZW4gcGF0aDogJHtub3RlRmlsZVBhdGh9YCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChub3RlRmlsZSBhcyBURmlsZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYgfHwgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKTtcclxuXHRcdFx0bm90ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cclxuXHRcdFx0aWYgKCFub3RlRmlsZSAmJiBsZWFmLnZpZXcuZm9jdXNlZEl0ZW0gJiYgIWxlYWYudmlldy5mb2N1c2VkSXRlbS5jb2xsYXBzaWJsZSkge1xyXG5cdFx0XHRcdG5vdGVGaWxlID0gbGVhZi52aWV3LmZvY3VzZWRJdGVtLmZpbGU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghbm90ZUZpbGUpIHtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdObyBmaWxlIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGEgbWFya2Rvd24gZmlsZSBmcm9tIHRoZSBlZGl0b3Igb3IgbmF2aWdhdGlvbiBiYXIuJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIG9wZW4gYSBtYXJrZG93biBmaWxlIG9yIHNlbGVjdCBhIGZvbGRlcicpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG5vdGVGaWxlIGFzIFRGaWxlKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnRQcm9jZXNzb3IoZmlsZUNvbnRlbnQpO1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KG5vdGVGaWxlIGFzIFRGaWxlLCB1cGRhdGVkQ29udGVudCk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVTZWxlY3Rpb24oY29udGVudDogc3RyaW5nLCBzZXR0aW5nczogUmVsYXhQbHVnaW5TZXR0aW5ncyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCB1cmxSZWdleCA9IC8oaHR0cHM/OlxcL1xcL1teXFxzXSspL2c7XHJcblx0XHRjb25zdCBleGNsdWRlZEV4dGVuc2lvbnMgPSAvXFwuKGV4ZXxsbmt8eGxzfG1kfHNofGVsZnxiaW58dG1wfGRvY3xvZHR8ZG9jeHxwZGZ8eWFyYXxkbGx8dHh0KSQvO1xyXG5cdFx0Y29uc3QgZmFuZ01hcCA9IHtcclxuXHRcdFx0J1suXSc6ICcuJyxcclxuXHRcdFx0J1s6XSc6ICc6J1xyXG5cdFx0fTtcclxuXHRcdGlmIChzZXR0aW5ncy5kZWZhbmdVUkxzKSB7XHJcblx0XHRcdGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xcW1xcLlxcXXxcXFtcXDpcXF0vZywgY2hhciA9PiBmYW5nTWFwW2NoYXJdKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgdXBkYXRlZFRleHQgPSAnJztcclxuXHRcdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdChcIlxcblwiKTtcclxuXHRcdGxldCBpbkNvZGVCbG9jayA9IGZhbHNlO1xyXG5cclxuXHRcdGxpbmVzLmZvckVhY2goKGxpbmUsIGluZGV4KSA9PiB7XHJcblx0XHRcdGlmIChzZXR0aW5ncy5pZ25vcmVDb2RlQmxvY2tzICYmIGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoXCJgYGBcIikpIHtcclxuXHRcdFx0XHRpbkNvZGVCbG9jayA9ICFpbkNvZGVCbG9jaztcclxuXHRcdFx0XHR1cGRhdGVkVGV4dCArPSBsaW5lICsgXCJcXG5cIjtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChpbkNvZGVCbG9jaykge1xyXG5cdFx0XHRcdHVwZGF0ZWRUZXh0ICs9IGxpbmUgKyBcIlxcblwiO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Zm9yIChjb25zdCB7aXNBY3RpdmUsIGtleSwgcmVnZXh9IG9mIHNldHRpbmdzLnJlZ2V4UGFpcnMpIHtcclxuXHRcdFx0XHRpZiAoIWlzQWN0aXZlKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGNvbXBpbGVkUmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4LCAnZycpO1xyXG5cdFx0XHRcdGxpbmUgPSBsaW5lLnJlcGxhY2UoY29tcGlsZWRSZWdleCwgKG1hdGNoLCAuLi5hcmdzKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBncm91cHMgPSBhcmdzLnNsaWNlKDAsIC0yKS5maWx0ZXIoZyA9PiBnICE9PSB1bmRlZmluZWQpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY2FwdHVyZWRWYWx1ZSA9IGdyb3Vwc1swXTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIWNhcHR1cmVkVmFsdWUpIHJldHVybiBtYXRjaDtcclxuXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuaWdub3JlTGlua3MgJiYgY29udGFpbnNWYWxpZExpbmsobGluZSwgY2FwdHVyZWRWYWx1ZSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIG1hdGNoO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5pZ25vcmVVUkxzKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHVybHMgPSBBcnJheS5mcm9tKGxpbmUubWF0Y2hBbGwodXJsUmVnZXgpLCBtID0+IG1bMF0pO1xyXG5cdFx0XHRcdFx0XHRsZXQgaWdub3JlQ3VycmVudE1hdGNoID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHVybCBvZiB1cmxzKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFleGNsdWRlZEV4dGVuc2lvbnMudGVzdCh1cmwpICYmIHVybC5pbmNsdWRlcyhjYXB0dXJlZFZhbHVlKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWdub3JlQ3VycmVudE1hdGNoID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYgKGlnbm9yZUN1cnJlbnRNYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBtYXRjaDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHJldHVybiBtYXRjaC5yZXBsYWNlKGNhcHR1cmVkVmFsdWUsIGBbWyR7Y2FwdHVyZWRWYWx1ZX1dXWApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHVwZGF0ZWRUZXh0ICs9IGxpbmU7XHJcblxyXG5cdFx0XHRpZiAoaW5kZXggIT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcclxuXHRcdFx0XHR1cGRhdGVkVGV4dCArPSBcIlxcblwiO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gdXBkYXRlZFRleHQ7XHJcblx0fVxyXG5cclxuXHRhc3luYyBwcm9jZXNzTWFya2Rvd25Db250ZW50KGFjdGlvbjogXCJyZW1vdmVCcmFja2V0c1wiIHwgXCJhZGRCcmFja2V0c1wiKSB7XHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XHJcblxyXG5cdFx0aWYgKCFhY3RpdmVMZWFmKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIGEgbWFya2Rvd24gZmlsZSBvciBzZWxlY3QgYSBmb2xkZXInKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHZpZXcgPSBhY3RpdmVMZWFmLnZpZXc7XHJcblx0XHRpZiAoIXZpZXcpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnVW5rbm93biBpdGVtIHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IGEgbWFya2Rvd24gZmlsZSBvciBmb2xkZXInKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IHZpZXcuZWRpdG9yLmdldFNlbGVjdGlvbigpO1xyXG5cclxuXHRcdFx0aWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24udHJpbSgpLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHRcdGxldCB1cGRhdGVkU2VsZWN0aW9uO1xyXG5cdFx0XHRcdGlmIChhY3Rpb24gPT09ICdyZW1vdmVCcmFja2V0cycpIHtcclxuXHRcdFx0XHRcdHVwZGF0ZWRTZWxlY3Rpb24gPSB0aGlzLnJlbW92ZUJyYWNrZXRzSW5TZWxlY3Rpb24oc2VsZWN0aW9uKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1JlbW92ZWQgYnJhY2tldHMgZnJvbSBzZWxlY3Rpb24hJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHVwZGF0ZWRTZWxlY3Rpb24gPSB0aGlzLnVwZGF0ZVNlbGVjdGlvbihzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnQWRkZWQgYnJhY2tldHMgaW4gc2VsZWN0aW9uIScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2aWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHVwZGF0ZWRTZWxlY3Rpb24pO1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoYWN0aW9uID09PSAncmVtb3ZlQnJhY2tldHMnID8gJ1JlbW92ZWQgYnJhY2tldHMgZnJvbSBzZWxlY3Rpb24hJyA6ICdVcGRhdGVkIGNvbnRlbnQgaW4gc2VsZWN0aW9uIScpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmIChhY3Rpb24gPT09ICdyZW1vdmVCcmFja2V0cycpIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucmVtb3ZlQnJhY2tldHNpbkZpbGUoKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1JlbW92ZWQgYnJhY2tldHMgZnJvbSBlbnRpcmUgZmlsZSEnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hZGRCcmFja2V0c0ZvckZpbGUoKTtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ0FkZGVkIGJyYWNrZXRzIG9uIGVudGlyZSBmaWxlIScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVtb3ZlQnJhY2tldHMoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnByb2Nlc3NNYXJrZG93bkNvbnRlbnQoJ3JlbW92ZUJyYWNrZXRzJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBhZGRCcmFja2V0cygpIHtcclxuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcclxuXHJcblx0XHRpZiAoIWFjdGl2ZUxlYWYpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIG9wZW4gYSBtYXJrZG93biBmaWxlIG9yIHNlbGVjdCBhIGZvbGRlcicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgdmlldyA9IGFjdGl2ZUxlYWYudmlldztcclxuXHRcdGlmICghdmlldykge1xyXG5cdFx0XHRuZXcgTm90aWNlKCdVbmtub3duIGl0ZW0gc2VsZWN0ZWQuIFBsZWFzZSBzZWxlY3QgYSBtYXJrZG93biBmaWxlIG9yIGZvbGRlcicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcclxuXHRcdFx0Y29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7XHJcblx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHJcblx0XHRcdGlmIChzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLnRyaW0oKS5sZW5ndGggIT09IDApIHtcclxuXHRcdFx0XHRjb25zdCB1cGRhdGVkU2VsZWN0aW9uID0gdGhpcy51cGRhdGVTZWxlY3Rpb24oc2VsZWN0aW9uLCB0aGlzLnNldHRpbmdzKTtcclxuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbih1cGRhdGVkU2VsZWN0aW9uKTtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdBZGRlZCBicmFja2V0cyBpbiBzZWxlY3Rpb24hJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hZGRCcmFja2V0c0ZvckZpbGUoKTtcclxuXHRcdFx0XHRuZXcgTm90aWNlKCdVcGRhdGVkIGVudGlyZSBmaWxlIScpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHZpZXcuZm9jdXNlZEl0ZW0gJiYgdmlldy5mb2N1c2VkSXRlbS5jb2xsYXBzaWJsZSkge1xyXG5cdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gdmlldy5mb2N1c2VkSXRlbS5maWxlLnBhdGg7XHJcblx0XHRcdGF3YWl0IHRoaXMuYWRkQnJhY2tldHNGb3JGb2xkZXIoZm9sZGVyUGF0aCk7XHJcblx0XHR9IGVsc2UgaWYgKHZpZXcuZm9jdXNlZEl0ZW0gJiYgIXZpZXcuZm9jdXNlZEl0ZW0uY29sbGFwc2libGUpIHtcclxuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSB2aWV3LmZvY3VzZWRJdGVtLmZpbGUucGF0aDtcclxuXHRcdFx0YXdhaXQgdGhpcy5hZGRCcmFja2V0c0ZvckZpbGUoZmlsZVBhdGgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnTm8gbWFya2Rvd24gZmlsZSBvciBmb2xkZXIgaXMgY3VycmVudGx5IHNlbGVjdGVkLiBQbGVhc2Ugc2VsZWN0IG9uZS4nKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRwcml2YXRlIHByb2dyZXNzID0gMDtcclxuXHRwcml2YXRlIG11dGV4ID0gbmV3IE11dGV4KCk7XHJcblxyXG5cdGFzeW5jIGFkZEJyYWNrZXRzRm9yRm9sZGVyKGZvbGRlclBhdGg6IHN0cmluZykge1xyXG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyUGF0aCkpO1xyXG5cdFx0Y29uc3QgdG90YWxGaWxlcyA9IGZpbGVzLmxlbmd0aDtcclxuXHRcdGxldCBwcm9jZXNzZWRGaWxlcyA9IDA7XHJcblxyXG5cdFx0bGV0IHByb2Nlc3NpbmdOb3RpY2UgPSBuZXcgTm90aWNlKGBQcm9jZXNzaW5nICR7dG90YWxGaWxlc30gZmlsZXMuLi5gLCB0b3RhbEZpbGVzICogMTAwMCk7XHJcblxyXG5cdFx0Y29uc3QgdGFza1F1ZXVlID0gZmlsZXMubWFwKGZpbGUgPT4gKCkgPT4gdGhpcy5hZGRCcmFja2V0c0ZvckZpbGUoZmlsZS5wYXRoKS50aGVuKCgpID0+IHtcclxuXHRcdFx0cHJvY2Vzc2VkRmlsZXMrKztcclxuXHRcdFx0cHJvY2Vzc2luZ05vdGljZS5zZXRNZXNzYWdlKGBQcm9jZXNzaW5nIGZpbGUgJHtwcm9jZXNzZWRGaWxlc30gb2YgJHt0b3RhbEZpbGVzfWApO1xyXG5cdFx0fSkpO1xyXG5cclxuXHRcdGNvbnN0IHByb2Nlc3NRdWV1ZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0aWYgKHRhc2tRdWV1ZS5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHRcdFx0YXdhaXQgdGFza1F1ZXVlLnNoaWZ0KCkoKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgbWF4Q29uY3VycmVudFRhc2tzID0gMjAwO1xyXG5cdFx0Y29uc3QgcHJvbWlzZXMgPSBBcnJheShNYXRoLm1pbihtYXhDb25jdXJyZW50VGFza3MsIHRhc2tRdWV1ZS5sZW5ndGgpKS5maWxsKG51bGwpLm1hcChwcm9jZXNzUXVldWUpO1xyXG5cclxuXHRcdGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcclxuXHJcblx0XHRwcm9jZXNzaW5nTm90aWNlLmhpZGUoKTtcclxuXHRcdG5ldyBOb3RpY2UoYEFsbCAke3RvdGFsRmlsZXN9IGZpbGVzIGluIHRoZSBmb2xkZXIgcHJvY2Vzc2VkLmApO1xyXG5cdH1cclxuXHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFrRjtBQVVsRixJQUFNLG1CQUF3QztBQUFBLEVBQzdDLGNBQWM7QUFBQSxJQUNiO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLE1BQ0MsWUFBWTtBQUFBLE1BQ1osT0FBTztBQUFBLE1BQ1AsU0FBUztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsTUFDQyxZQUFZO0FBQUEsTUFDWixPQUFPO0FBQUEsTUFDUCxTQUFTO0FBQUEsSUFDVjtBQUFBLElBQ0E7QUFBQSxNQUNDLFlBQVk7QUFBQSxNQUNaLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWO0FBQUEsRUFDRDtBQUFBLEVBQ0EsYUFBYTtBQUFBLEVBQ2Isa0JBQWtCO0FBQUEsRUFDbEIsWUFBWTtBQUFBLEVBQ1osWUFBWTtBQUNiO0FBRUEsSUFBTSxRQUFOLE1BQVk7QUFBQSxFQUFaO0FBQ0MsU0FBUSxXQUFpQztBQUN6QyxTQUFRLFdBQWdDO0FBQUE7QUFBQSxFQUV4QyxNQUFNLE9BQU87QUFDWixRQUFJLEtBQUs7QUFBVSxZQUFNLEtBQUs7QUFDOUIsU0FBSyxXQUFXLElBQUksUUFBUSxDQUFDLFlBQVk7QUFDeEMsV0FBSyxXQUFXO0FBQUEsSUFDakIsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQVM7QUFDUixRQUFJLEtBQUssVUFBVTtBQUNsQixXQUFLLFNBQVM7QUFDZCxXQUFLLFdBQVc7QUFDaEIsV0FBSyxXQUFXO0FBQUEsSUFDakI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLGFBQWdCLFVBQXdDO0FBQzdELFVBQU0sS0FBSyxLQUFLO0FBQ2hCLFFBQUk7QUFDSCxhQUFPLE1BQU0sU0FBUztBQUFBLElBQ3ZCLFVBQUU7QUFDRCxXQUFLLE9BQU87QUFBQSxJQUNiO0FBQUEsRUFDRDtBQUNEO0FBRUEsSUFBTSxrQkFBTixjQUE4QixpQ0FBaUI7QUFBQSxFQU05QyxZQUFZLEtBQVUsUUFBcUI7QUFDMUMsVUFBTSxLQUFLLE1BQU07QUFIbEIsdUJBQXVCO0FBSXRCLFNBQUssU0FBUztBQUFBLEVBQ2Y7QUFBQSxFQUVBLGVBQWUsV0FBb0I7QUFDbEMsU0FBSyxjQUFjO0FBQ25CLFFBQUksS0FBSyxZQUFZO0FBQ3BCLFdBQUssV0FBVyxXQUFXLENBQUM7QUFDNUIsVUFBSSxXQUFXO0FBQ2QsYUFBSyxXQUFXLFVBQVUsSUFBSSxjQUFjO0FBQUEsTUFDN0MsT0FBTztBQUNOLGFBQUssV0FBVyxVQUFVLE9BQU8sY0FBYztBQUFBLE1BQ2hEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUNBLFVBQVU7QUFDVCxVQUFNLEVBQUMsWUFBVyxJQUFJO0FBQ3RCLGdCQUFZLE1BQU07QUFDbEIsVUFBTSxvQkFBb0IsWUFBWSxTQUFTLEtBQUs7QUFDcEQsc0JBQWtCLE1BQU0sVUFBVTtBQUNsQyxzQkFBa0IsTUFBTSxnQkFBZ0I7QUFFeEMsYUFBUyxnQkFBZ0IsU0FBUztBQUNqQyxZQUFNLFFBQVE7QUFDZCxhQUFPLENBQUMsTUFBTSxLQUFLLE9BQU87QUFBQSxJQUMzQjtBQUVBLGFBQVMscUJBQXFCLFVBQVU7QUFDdkMsVUFBSSxnQkFBZ0IsU0FBUyxLQUFLLEdBQUc7QUFDcEMsY0FBTSxjQUFjLGlCQUFpQixTQUFTLGVBQWUsRUFDM0QsaUJBQWlCLGdCQUFnQixFQUFFLEtBQUs7QUFDMUMsaUJBQVMsTUFBTSxjQUFjO0FBQUEsTUFDOUIsT0FBTztBQUNOLGlCQUFTLE1BQU0sY0FBYztBQUFBLE1BQzlCO0FBQUEsSUFDRDtBQUVBLGFBQVMsaUJBQWlCLG9CQUFvQixDQUFDLFVBQVU7QUFDeEQsWUFBTSxjQUFjLFNBQVMsY0FBYyxrQkFBa0I7QUFFN0Qsa0JBQVksaUJBQWlCLFNBQVMsV0FBWTtBQUNqRCxjQUFNLFFBQVEsU0FBUyxjQUFjLFFBQVE7QUFDN0MsY0FBTSxXQUFXLE1BQU0sY0FBYyxVQUFVO0FBRS9DLDZCQUFxQixRQUFRO0FBRTdCLGlCQUFTLGlCQUFpQixTQUFTLFdBQVk7QUFDOUMsK0JBQXFCLFFBQVE7QUFBQSxRQUM5QixDQUFDO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFDRixDQUFDO0FBRUQsVUFBTSxxQkFBcUIsQ0FBQyxVQUE0QjtBQUN2RCxVQUFJLFdBQVc7QUFDZixVQUFJO0FBQ0gsWUFBSSxNQUFNLElBQUksT0FBTyxNQUFNLEtBQUs7QUFDaEMsWUFBSSxjQUFjLE1BQU0sTUFBTSxNQUFNLFdBQVcsS0FBSyxDQUFDLEdBQUc7QUFDeEQsWUFBSSxhQUFhLEdBQUc7QUFDbkIsZ0JBQU0sTUFBTSxTQUFTO0FBQ3JCLHFCQUFXO0FBQUEsUUFDWixPQUFPO0FBQ04sZ0JBQU0sTUFBTSxTQUFTO0FBQUEsUUFDdEI7QUFBQSxNQUNELFNBQVMsR0FBUDtBQUNELGNBQU0sTUFBTSxTQUFTO0FBQ3JCLG1CQUFXO0FBQUEsTUFDWjtBQUVBLFlBQU0sZUFBZSxNQUFNO0FBQzNCLFVBQUksZ0JBQWdCLGFBQWEsVUFBVSxTQUFTLGFBQWEsR0FBRztBQUNuRSxxQkFBYSxjQUFjO0FBQUEsTUFDNUIsT0FBTztBQUNOLGNBQU0sT0FBTyxTQUFTLGNBQWMsTUFBTTtBQUMxQyxhQUFLLFlBQVk7QUFDakIsYUFBSyxjQUFjO0FBQ25CLGNBQU0sV0FBVyxhQUFhLE1BQU0sTUFBTSxXQUFXO0FBQUEsTUFDdEQ7QUFBQSxJQUNEO0FBQ0EsVUFBTSxjQUFjLENBQUMsS0FBYyxPQUFnQixXQUFvQixVQUFVO0FBQ2hGLFlBQU0sTUFBTSxrQkFBa0IsU0FBUyxLQUFLO0FBQzVDLFVBQUksTUFBTSxVQUFVO0FBQ3BCLFVBQUksTUFBTSxhQUFhO0FBQ3ZCLFVBQUksTUFBTSxpQkFBaUI7QUFFM0IsWUFBTSxhQUFhLElBQUksU0FBUyxRQUFRLEVBQUMsV0FBVyxlQUFlLE1BQU0sU0FBRyxDQUFDO0FBQzdFLFlBQU0saUJBQWlCLElBQUksU0FBUyxTQUFTLEVBQUMsV0FBVyxrQkFBaUIsQ0FBQztBQUMzRSxxQkFBZSxPQUFPO0FBQ3RCLHFCQUFlLFVBQVU7QUFDekIsVUFBSSxZQUFZLGNBQWM7QUFHOUIsWUFBTSxXQUFXLElBQUksU0FBUyxTQUFTLEVBQUMsV0FBVyxhQUFhLGFBQWEsbUJBQW1CLE9BQU8sb0JBQU8sR0FBRSxDQUFDO0FBQ2pILGVBQVMsTUFBTSxPQUFPO0FBQ3RCLGVBQVMsTUFBTSxjQUFjO0FBRzdCLFlBQU0sYUFBYSxJQUFJLFNBQVMsU0FBUyxFQUFDLFdBQVcsZUFBZSxhQUFhLFVBQVUsT0FBTyx3QkFBUyxHQUFFLENBQUM7QUFDOUcsaUJBQVcsTUFBTSxPQUFPO0FBQ3hCLGlCQUFXLE1BQU0sY0FBYztBQUUvQixVQUFJLFNBQVMsVUFBVSxFQUFDLE1BQU0sVUFBVSxXQUFXLGlCQUFpQixvQkFBTyxLQUFLLElBQUksSUFBRyxDQUFDLEVBQ3RGLGlCQUFpQixTQUFTLE1BQU07QUFDaEMsWUFBSSxPQUFPO0FBQ1gsZ0NBQXdCLEtBQUssSUFBSTtBQUFBLE1BQ2xDLENBQUM7QUFFRixVQUFJO0FBQVksc0JBQWMsS0FBSyxVQUFVO0FBQzdDLGlCQUFXLGlCQUFpQixTQUFTLE1BQU0sbUJBQW1CLFVBQVUsQ0FBQztBQUFBLElBQzFFO0FBRUEsZ0JBQVksU0FBUyxVQUFVLEVBQUMsTUFBTSxhQUFZLENBQUMsRUFBRSxpQkFBaUIsU0FBUyxNQUFNLFlBQVksQ0FBQztBQUVsRyxlQUFXLEVBQUMsVUFBVSxLQUFLLE1BQUssS0FBSyxLQUFLLE9BQU8sU0FBUyxZQUFZO0FBQ3JFLGtCQUFZLEtBQUssT0FBTyxRQUFRO0FBQUEsSUFDakM7QUFFQSxRQUFJLFNBQVM7QUFDYixRQUFJLFdBQVc7QUFDZixRQUFJLGlCQUFpQjtBQUVyQixhQUFTLHdCQUF3QixXQUFXO0FBRTNDLFlBQU0sYUFBYSxDQUFDO0FBQ3BCLHdCQUFrQixpQkFBaUIsS0FBSyxFQUFFLFFBQVEsU0FBTztBQUV4RCxjQUFNLHNCQUFzQixJQUFJLGNBQWMsd0JBQXdCO0FBQ3RFLGNBQU0sV0FBVyxJQUFJLGNBQWMsc0NBQXNDO0FBQ3pFLGNBQU0sYUFBYSxJQUFJLGNBQWMsNkJBQTZCO0FBR2xFLFlBQUksWUFBWSxjQUFjLHFCQUFxQjtBQUNsRCxnQkFBTSxNQUFNLFNBQVM7QUFDckIsZ0JBQU0sUUFBUSxXQUFXO0FBQ3pCLGdCQUFNLFdBQVcsb0JBQW9CO0FBQ3JDLHFCQUFXLEtBQUssRUFBQyxVQUFVLEtBQUssT0FBTyxNQUFLLENBQUM7QUFBQSxRQUM5QztBQUFBLE1BQ0QsQ0FBQztBQUNELFVBQUksVUFBVSxVQUFVLFVBQVUsT0FBTyxVQUFVO0FBQ2xELGtCQUFVLE9BQU8sU0FBUyxhQUFhO0FBQ3ZDLGtCQUFVLE9BQU8sYUFBYTtBQUFBLE1BQy9CLE9BQU87QUFDTixnQkFBUSxNQUFNLGtDQUFrQztBQUFBLE1BQ2pEO0FBQUEsSUFDRDtBQUVBLFFBQUksY0FBYztBQUNsQixRQUFJLGVBQWU7QUFDbkIsUUFBSSxXQUFXO0FBRWYsYUFBUyxjQUFjLFNBQVMsWUFBWTtBQUMzQyxVQUFJLENBQUMsWUFBWTtBQUNoQixnQkFBUSxNQUFNLDBCQUEwQixRQUFRLFNBQVM7QUFDekQ7QUFBQSxNQUNEO0FBRUEsaUJBQVcsaUJBQWlCLGFBQWEsU0FBVSxHQUFHO0FBQ3JELFVBQUUsZUFBZTtBQUNqQixVQUFFLGdCQUFnQjtBQUVsQixjQUFNLHVCQUF1QixTQUFTLGNBQWMsaUNBQWlDLEVBQUUsc0JBQXNCLEVBQUU7QUFDL0csY0FBTSxjQUFjLFFBQVEsc0JBQXNCO0FBQ2xELHlCQUFpQixFQUFFLFVBQVUsWUFBWSxNQUFNO0FBQy9DLHVCQUFlLENBQUMsR0FBRyxRQUFRLGNBQWMsUUFBUSxFQUFFLFFBQVEsT0FBTztBQUVsRSxzQkFBYztBQUNkLG9CQUFZLE1BQU0sU0FBUztBQUMzQixvQkFBWSxNQUFNLFdBQVc7QUFFN0IsY0FBTSxTQUFTLEVBQUUsVUFBVTtBQUMzQixvQkFBWSxNQUFNLE1BQU0sR0FBRztBQUUzQixpQkFBUyxpQkFBaUIsYUFBYSxVQUFVO0FBQ2pELGlCQUFTLGlCQUFpQixXQUFXLFNBQVM7QUFBQSxNQUMvQyxDQUFDO0FBQUEsSUFDRjtBQUVBLGFBQVMsV0FBVyxHQUFHO0FBQ3RCLFVBQUksYUFBYTtBQUNoQixjQUFNLFNBQVMsRUFBRSxVQUFVO0FBQzNCLG9CQUFZLE1BQU0sTUFBTSxHQUFHO0FBRTNCLG1CQUFXO0FBQ1gsWUFBSSxrQkFBa0I7QUFDdEIsU0FBQyxHQUFHLFlBQVksY0FBYyxRQUFRLEVBQUUsUUFBUSxDQUFDLE9BQU8sUUFBUTtBQUMvRCxjQUFJLFVBQVUsYUFBYTtBQUMxQixrQkFBTSxPQUFPLE1BQU0sc0JBQXNCO0FBQ3pDLGtCQUFNLFdBQVcsS0FBSyxJQUFJLEtBQUssTUFBTSxLQUFLLFNBQVMsSUFBSSxFQUFFLE9BQU87QUFDaEUsZ0JBQUksV0FBVyxpQkFBaUI7QUFDL0IsZ0NBQWtCO0FBQ2xCLHlCQUFXO0FBQUEsWUFDWjtBQUFBLFVBQ0Q7QUFBQSxRQUNELENBQUM7QUFBQSxNQUNGO0FBQUEsSUFDRDtBQUVBLGFBQVMsWUFBWTtBQUNwQixVQUFJLGFBQWE7QUFDaEIsb0JBQVksTUFBTSxXQUFXO0FBQzdCLG9CQUFZLE1BQU0sTUFBTTtBQUN4QixvQkFBWSxNQUFNLFNBQVM7QUFFM0IsWUFBSSxhQUFhLFFBQVEsaUJBQWlCLFFBQVEsYUFBYSxjQUFjO0FBQzVFLGdCQUFNLFNBQVMsWUFBWTtBQUMzQixjQUFJLFlBQVksT0FBTyxTQUFTLFFBQVE7QUFDdkMsbUJBQU8sWUFBWSxXQUFXO0FBQUEsVUFDL0IsT0FBTztBQUNOLG1CQUFPLGFBQWEsYUFBYSxPQUFPLFNBQVMsWUFBWSxXQUFXLGVBQWUsSUFBSSxFQUFFLENBQUM7QUFBQSxVQUMvRjtBQUFBLFFBQ0Q7QUFFQSxzQkFBYztBQUNkLGdDQUF3QixLQUFLLElBQUk7QUFDakMsaUJBQVMsb0JBQW9CLGFBQWEsVUFBVTtBQUNwRCxpQkFBUyxvQkFBb0IsV0FBVyxTQUFTO0FBQ2pELHdCQUFnQjtBQUNoQix1QkFBZTtBQUNmLG1CQUFXO0FBQUEsTUFDWjtBQUFBLElBQ0Q7QUFFQSxhQUFTLGtCQUFrQjtBQUMxQix3QkFBa0IsaUJBQWlCLEtBQUssRUFBRSxRQUFRLENBQUMsUUFBUTtBQUMxRCxZQUFJLE1BQU0sTUFBTTtBQUFBLE1BQ2pCLENBQUM7QUFBQSxJQUNGO0FBQ0EsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEsY0FBYyxFQUN0QixVQUFVLFlBQVU7QUExY3hCO0FBMmNJLGFBQ0UsVUFBUyxVQUFLLE9BQU8sU0FBUyxnQkFBckIsWUFBb0MsSUFBSSxFQUNqRCxTQUFTLE9BQU0sVUFBUztBQUN4QixhQUFLLE9BQU8sU0FBUyxjQUFjO0FBQ25DLGNBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxNQUNoQyxDQUFDLEVBQ0EsV0FBVyw4RUFBOEU7QUFBQSxJQUU1RixDQUFDO0FBQ0YsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEsYUFBYSxFQUNyQixVQUFVLFlBQVU7QUF0ZHhCO0FBdWRJLGFBQ0UsVUFBUyxVQUFLLE9BQU8sU0FBUyxlQUFyQixZQUFtQyxJQUFJLEVBQ2hELFNBQVMsT0FBTSxVQUFTO0FBQ3hCLGFBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUMsRUFDQSxXQUFXLDhDQUE4QztBQUFBLElBRTVELENBQUM7QUFDRixRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxhQUFhLEVBQ3JCLFVBQVUsWUFBVTtBQWxleEI7QUFtZUksYUFDRSxVQUFTLFVBQUssT0FBTyxTQUFTLGVBQXJCLFlBQW1DLElBQUksRUFDaEQsU0FBUyxPQUFNLFVBQVM7QUFDeEIsYUFBSyxPQUFPLFNBQVMsYUFBYTtBQUNsQyxjQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsTUFDaEMsQ0FBQyxFQUNBLFdBQVcsd0JBQXdCO0FBQUEsSUFFdEMsQ0FBQztBQUNGLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLG9CQUFvQixFQUM1QixVQUFVLFlBQVU7QUE5ZXhCO0FBK2VJLGFBQ0UsVUFBUyxVQUFLLE9BQU8sU0FBUyxxQkFBckIsWUFBeUMsS0FBSyxFQUN2RCxTQUFTLE9BQU0sVUFBUztBQUN4QixhQUFLLE9BQU8sU0FBUyxtQkFBbUI7QUFDeEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2hDLENBQUMsRUFDQSxXQUFXLHlEQUF5RDtBQUFBLElBQ3ZFLENBQUM7QUFFRixRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxNQUFNLEVBQ2QsVUFBVSxZQUFVO0FBQ3BCLGFBQU8sY0FBYyxNQUFNLEVBQ3pCLFFBQVEsTUFBTTtBQUNkLGdDQUF3QixJQUFJO0FBQzVCLGNBQU0sY0FBYyxTQUFTLGNBQWMscUJBQXFCO0FBQ2hFLFlBQUksYUFBYTtBQUNoQixzQkFBWSxNQUFNO0FBQUEsUUFDbkI7QUFDQSxhQUFLLGVBQWUsS0FBSztBQUFBLE1BQzFCLENBQUMsRUFDQSxXQUFXLHlEQUF5RDtBQUN0RSxXQUFLLGFBQWEsT0FBTztBQUN6QixXQUFLLGVBQWUsS0FBSztBQUFBLElBQzFCLENBQUM7QUFDRixRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxnQkFBZ0IsRUFDeEIsVUFBVSxZQUFVO0FBQ3BCLGFBQU8sY0FBYyxPQUFPLEVBQzFCLFFBQVEsTUFBTTtBQUNkLGNBQU0sZUFBZSxRQUFRLHFEQUFxRDtBQUNsRixZQUFJLGNBQWM7QUFDakIsZUFBSyxnQkFBZ0I7QUFFckIsY0FBSSxLQUFLLE9BQU8sc0JBQXNCO0FBQ3JDLGlCQUFLLE9BQU8scUJBQXFCLFFBQVE7QUFBQSxVQUMxQztBQUNBLGNBQUksdUJBQU8sdUNBQXVDO0FBQUEsUUFDbkQ7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNILENBQUM7QUFDRixVQUFNLHVCQUF1QixNQUFNLEtBQUssZUFBZSxJQUFJO0FBQzNELHNCQUFrQixpQkFBaUIsU0FBUyxvQkFBb0I7QUFDaEUsc0JBQWtCLGlCQUFpQixVQUFVLG9CQUFvQjtBQUFBLEVBQ2xFO0FBQUEsRUFFQSxNQUFNLGtCQUFrQjtBQUN2QixTQUFLLE9BQU8sV0FBVztBQUN2QixVQUFNLEtBQUssT0FBTyxhQUFhO0FBRS9CLFFBQUksdUJBQU8sdUNBQXVDO0FBQUEsRUFDbkQ7QUFDRDtBQUNDLFNBQVMsa0JBQWtCLE1BQWMsT0FBd0I7QUFDaEUsUUFBTSxZQUFZO0FBQ2xCLE1BQUk7QUFDSixVQUFRLFNBQVMsVUFBVSxLQUFLLElBQUksT0FBTyxNQUFNO0FBQ2hELFFBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxLQUFLLEtBQUssVUFBVSxhQUFhLEtBQUssUUFBUSxLQUFLLElBQUksTUFBTSxRQUFRO0FBQ3JHLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUNBLFNBQU87QUFDUjtBQUVELElBQXFCLGNBQXJCLGNBQXlDLHVCQUFPO0FBQUEsRUFBaEQ7QUFBQTtBQTRSQyxTQUFRLFdBQVc7QUFDbkIsU0FBUSxRQUFRLElBQUksTUFBTTtBQUFBO0FBQUEsRUF6UjNCLE1BQU0sU0FBUztBQUNiLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFNBQUssdUJBQXVCLElBQUksZ0JBQWdCLEtBQUssS0FBSyxJQUFJO0FBRTlELFNBQUssY0FBYyxLQUFLLG9CQUFvQjtBQUM1QyxTQUFLLFdBQVcsRUFBQyxJQUFJLGlCQUFpQixNQUFNLFNBQVMsVUFBVSxNQUFNLEtBQUssWUFBWSxFQUFDLENBQUM7QUFDeEYsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLFVBQVUsR0FBRyxhQUFhLENBQUMsTUFBTSxTQUFTO0FBQ2xELGFBQUssUUFBUSxDQUFDLFNBQVM7QUFDdEIsZUFDRSxTQUFTLFlBQVksRUFDckIsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsWUFBWTtBQUNwQixpQkFBSyxZQUFZO0FBQUEsVUFDbEIsQ0FBQztBQUFBLFFBQ0gsQ0FBQztBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQ0Y7QUFDQSxTQUFLO0FBQUEsTUFDSixLQUFLLElBQUksVUFBVSxHQUFHLGVBQWUsQ0FBQyxNQUFNLFFBQVEsU0FBUztBQUM1RCxhQUFLLFFBQVEsQ0FBQyxTQUFTO0FBQ3RCLGVBQ0UsU0FBUyxZQUFZLEVBQ3JCLFFBQVEsY0FBYyxFQUN0QixRQUFRLFlBQVk7QUFDcEIsaUJBQUssWUFBWTtBQUFBLFVBQ2xCLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNGO0FBQ0EsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLFVBQVUsR0FBRyxlQUFlLENBQUMsTUFBTSxRQUFRLFNBQVM7QUFDNUQsYUFBSyxRQUFRLENBQUMsU0FBUztBQUN0QixlQUNFLFNBQVMscUJBQXFCLEVBQzlCLFFBQVEsY0FBYyxFQUN0QixRQUFRLFlBQVk7QUFDcEIsaUJBQUssZUFBZTtBQUFBLFVBQ3JCLENBQUM7QUFBQSxRQUNILENBQUM7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUNGO0FBQ0EsU0FBSyxjQUFjLEtBQUssSUFBSSxVQUFVLEdBQUcsbUJBQW1CLE1BQU07QUFDbEUsVUFBSSxLQUFLLHNCQUFzQjtBQUM5QixhQUFLLHFCQUFxQixlQUFlLEtBQUs7QUFBQSxNQUMvQztBQUFBLElBQ0QsQ0FBQyxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBTSxrQkFBa0I7QUFDdkIsU0FBSyxXQUFXO0FBQ2hCLFVBQU0sS0FBSyxhQUFhO0FBQ3hCLFFBQUksdUJBQU8sdUNBQXVDO0FBQUEsRUFDbkQ7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixRQUFJO0FBQ0gsWUFBTSxpQkFBaUIsTUFBTSxLQUFLLFNBQVM7QUFDM0MsVUFBSSxnQkFBZ0I7QUFDbkIsYUFBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLGNBQWM7QUFBQSxNQUNuRSxPQUFPO0FBQ04sY0FBTSxJQUFJLE1BQU0sb0JBQW9CO0FBQUEsTUFDckM7QUFBQSxJQUNELFNBQVMsR0FBUDtBQUNELFlBQU0sS0FBSyxnQkFBZ0I7QUFBQSxJQUM1QjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUNYO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQ2pDLFFBQUksdUJBQU8sZUFBZTtBQUFBLEVBQzNCO0FBQUEsRUFFQSwwQkFBMEIsU0FBeUI7QUFDbEQsV0FBTyxRQUFRLFFBQVEsMkJBQTJCLE1BQU07QUFBQSxFQUN6RDtBQUFBLEVBRUEsTUFBTSxtQkFBbUIsZUFBZSxJQUFJO0FBQzNDLFVBQU0sS0FBSyxtQkFBbUIsY0FBYyxDQUFDLFlBQVksS0FBSyxnQkFBZ0IsU0FBUyxLQUFLLFFBQVEsQ0FBQztBQUFBLEVBQ3RHO0FBQUEsRUFFQSxNQUFNLHFCQUFxQixlQUFlLElBQUk7QUFDN0MsVUFBTSxLQUFLLG1CQUFtQixjQUFjLEtBQUsseUJBQXlCO0FBQUEsRUFDM0U7QUFBQSxFQUVBLE1BQU0sbUJBQW1CLGNBQXNCLGtCQUE4RDtBQUM1RyxRQUFJO0FBRUosUUFBSSxjQUFjO0FBRWxCLFFBQUksaUJBQWlCLElBQUk7QUFDeEIsaUJBQVcsS0FBSyxJQUFJLE1BQU0sc0JBQXNCLFlBQVk7QUFDNUQsVUFBSSxDQUFDLFVBQVU7QUFDZCxZQUFJLHVCQUFPLG9DQUFvQyxjQUFjO0FBQzdEO0FBQUEsTUFDRDtBQUNBLG9CQUFjLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxRQUFpQjtBQUFBLElBQzFELE9BQU87QUFDTixZQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsY0FBYyxLQUFLLElBQUksVUFBVSxRQUFRO0FBQ3pFLGlCQUFXLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFFNUMsVUFBSSxDQUFDLFlBQVksS0FBSyxLQUFLLGVBQWUsQ0FBQyxLQUFLLEtBQUssWUFBWSxhQUFhO0FBQzdFLG1CQUFXLEtBQUssS0FBSyxZQUFZO0FBQUEsTUFDbEM7QUFFQSxVQUFJLENBQUMsVUFBVTtBQUNkLFlBQUksdUJBQU8sb0ZBQW9GO0FBQy9GO0FBQUEsTUFDRDtBQUVBLFVBQUksRUFBRSxLQUFLLGdCQUFnQiwrQkFBZTtBQUN6QyxZQUFJLHVCQUFPLGdEQUFnRDtBQUMzRDtBQUFBLE1BQ0Q7QUFFQSxvQkFBYyxNQUFNLEtBQUssSUFBSSxNQUFNLEtBQUssUUFBaUI7QUFBQSxJQUMxRDtBQUVBLFVBQU0saUJBQWlCLGlCQUFpQixXQUFXO0FBQ25ELFVBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxVQUFtQixjQUFjO0FBQUEsRUFDOUQ7QUFBQSxFQUVBLGdCQUFnQixTQUFpQixVQUF1QztBQUN2RSxVQUFNLFdBQVc7QUFDakIsVUFBTSxxQkFBcUI7QUFDM0IsVUFBTSxVQUFVO0FBQUEsTUFDZixPQUFPO0FBQUEsTUFDUCxPQUFPO0FBQUEsSUFDUjtBQUNBLFFBQUksU0FBUyxZQUFZO0FBQ3hCLGdCQUFVLFFBQVEsUUFBUSxrQkFBa0IsVUFBUSxRQUFRLElBQUksQ0FBQztBQUFBLElBQ2xFO0FBRUEsUUFBSSxjQUFjO0FBQ2xCLFVBQU0sUUFBUSxRQUFRLE1BQU0sSUFBSTtBQUNoQyxRQUFJLGNBQWM7QUFFbEIsVUFBTSxRQUFRLENBQUMsTUFBTSxVQUFVO0FBQzlCLFVBQUksU0FBUyxvQkFBb0IsS0FBSyxLQUFLLEVBQUUsV0FBVyxLQUFLLEdBQUc7QUFDL0Qsc0JBQWMsQ0FBQztBQUNmLHVCQUFlLE9BQU87QUFDdEI7QUFBQSxNQUNEO0FBRUEsVUFBSSxhQUFhO0FBQ2hCLHVCQUFlLE9BQU87QUFDdEI7QUFBQSxNQUNEO0FBRUEsaUJBQVcsRUFBQyxVQUFVLEtBQUssTUFBSyxLQUFLLFNBQVMsWUFBWTtBQUN6RCxZQUFJLENBQUMsVUFBVTtBQUNkO0FBQUEsUUFDRDtBQUVBLGNBQU0sZ0JBQWdCLElBQUksT0FBTyxPQUFPLEdBQUc7QUFDM0MsZUFBTyxLQUFLLFFBQVEsZUFBZSxDQUFDLFVBQVUsU0FBUztBQUN0RCxnQkFBTSxTQUFTLEtBQUssTUFBTSxHQUFHLEVBQUUsRUFBRSxPQUFPLE9BQUssTUFBTSxNQUFTO0FBQzVELGdCQUFNLGdCQUFnQixPQUFPLENBQUM7QUFFOUIsY0FBSSxDQUFDO0FBQWUsbUJBQU87QUFFM0IsY0FBSSxTQUFTLGVBQWUsa0JBQWtCLE1BQU0sYUFBYSxHQUFHO0FBQ25FLG1CQUFPO0FBQUEsVUFDUjtBQUVBLGNBQUksU0FBUyxZQUFZO0FBQ3hCLGtCQUFNLE9BQU8sTUFBTSxLQUFLLEtBQUssU0FBUyxRQUFRLEdBQUcsT0FBSyxFQUFFLENBQUMsQ0FBQztBQUMxRCxnQkFBSSxxQkFBcUI7QUFFekIsdUJBQVcsT0FBTyxNQUFNO0FBQ3ZCLGtCQUFJLENBQUMsbUJBQW1CLEtBQUssR0FBRyxLQUFLLElBQUksU0FBUyxhQUFhLEdBQUc7QUFDakUscUNBQXFCO0FBQ3JCO0FBQUEsY0FDRDtBQUFBLFlBQ0Q7QUFFQSxnQkFBSSxvQkFBb0I7QUFDdkIscUJBQU87QUFBQSxZQUNSO0FBQUEsVUFDRDtBQUVBLGlCQUFPLE1BQU0sUUFBUSxlQUFlLEtBQUssaUJBQWlCO0FBQUEsUUFDM0QsQ0FBQztBQUFBLE1BQ0Y7QUFDQSxxQkFBZTtBQUVmLFVBQUksVUFBVSxNQUFNLFNBQVMsR0FBRztBQUMvQix1QkFBZTtBQUFBLE1BQ2hCO0FBQUEsSUFDRCxDQUFDO0FBRUQsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLE1BQU0sdUJBQXVCLFFBQTBDO0FBQ3RFLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVTtBQUV0QyxRQUFJLENBQUMsWUFBWTtBQUNoQixVQUFJLHVCQUFPLGdEQUFnRDtBQUMzRDtBQUFBLElBQ0Q7QUFFQSxVQUFNLE9BQU8sV0FBVztBQUN4QixRQUFJLENBQUMsTUFBTTtBQUNWLFVBQUksdUJBQU8sZ0VBQWdFO0FBQzNFO0FBQUEsSUFDRDtBQUVBLFFBQUksZ0JBQWdCLDhCQUFjO0FBQ2pDLFlBQU0sWUFBWSxLQUFLLE9BQU8sYUFBYTtBQUUzQyxVQUFJLGFBQWEsVUFBVSxLQUFLLEVBQUUsV0FBVyxHQUFHO0FBQy9DLFlBQUk7QUFDSixZQUFJLFdBQVcsa0JBQWtCO0FBQ2hDLDZCQUFtQixLQUFLLDBCQUEwQixTQUFTO0FBQzNELGNBQUksdUJBQU8sa0NBQWtDO0FBQUEsUUFDOUMsT0FBTztBQUNOLDZCQUFtQixLQUFLLGdCQUFnQixXQUFXLEtBQUssUUFBUTtBQUNoRSxjQUFJLHVCQUFPLDhCQUE4QjtBQUFBLFFBQzFDO0FBQ0EsYUFBSyxPQUFPLGlCQUFpQixnQkFBZ0I7QUFDN0MsWUFBSSx1QkFBTyxXQUFXLG1CQUFtQixxQ0FBcUMsK0JBQStCO0FBQUEsTUFDOUcsT0FBTztBQUNOLFlBQUksV0FBVyxrQkFBa0I7QUFDaEMsZ0JBQU0sS0FBSyxxQkFBcUI7QUFDaEMsY0FBSSx1QkFBTyxvQ0FBb0M7QUFBQSxRQUNoRCxPQUFPO0FBQ04sZ0JBQU0sS0FBSyxtQkFBbUI7QUFDOUIsY0FBSSx1QkFBTyxnQ0FBZ0M7QUFBQSxRQUM1QztBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxpQkFBaUI7QUFDdEIsVUFBTSxLQUFLLHVCQUF1QixnQkFBZ0I7QUFBQSxFQUNuRDtBQUFBLEVBRUEsTUFBTSxjQUFjO0FBQ25CLFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVTtBQUV0QyxRQUFJLENBQUMsWUFBWTtBQUNoQixVQUFJLHVCQUFPLGdEQUFnRDtBQUMzRDtBQUFBLElBQ0Q7QUFFQSxVQUFNLE9BQU8sV0FBVztBQUN4QixRQUFJLENBQUMsTUFBTTtBQUNWLFVBQUksdUJBQU8sZ0VBQWdFO0FBQzNFO0FBQUEsSUFDRDtBQUVBLFFBQUksZ0JBQWdCLDhCQUFjO0FBQ2pDLFlBQU0sU0FBUyxLQUFLO0FBQ3BCLFlBQU0sWUFBWSxPQUFPLGFBQWE7QUFFdEMsVUFBSSxhQUFhLFVBQVUsS0FBSyxFQUFFLFdBQVcsR0FBRztBQUMvQyxjQUFNLG1CQUFtQixLQUFLLGdCQUFnQixXQUFXLEtBQUssUUFBUTtBQUN0RSxlQUFPLGlCQUFpQixnQkFBZ0I7QUFDeEMsWUFBSSx1QkFBTyw4QkFBOEI7QUFBQSxNQUMxQyxPQUFPO0FBQ04sY0FBTSxLQUFLLG1CQUFtQjtBQUM5QixZQUFJLHVCQUFPLHNCQUFzQjtBQUFBLE1BQ2xDO0FBQUEsSUFDRCxXQUFXLEtBQUssZUFBZSxLQUFLLFlBQVksYUFBYTtBQUM1RCxZQUFNLGFBQWEsS0FBSyxZQUFZLEtBQUs7QUFDekMsWUFBTSxLQUFLLHFCQUFxQixVQUFVO0FBQUEsSUFDM0MsV0FBVyxLQUFLLGVBQWUsQ0FBQyxLQUFLLFlBQVksYUFBYTtBQUM3RCxZQUFNLFdBQVcsS0FBSyxZQUFZLEtBQUs7QUFDdkMsWUFBTSxLQUFLLG1CQUFtQixRQUFRO0FBQUEsSUFDdkMsT0FBTztBQUNOLFVBQUksdUJBQU8sc0VBQXNFO0FBQUEsSUFDbEY7QUFBQSxFQUNEO0FBQUEsRUFNQSxNQUFNLHFCQUFxQixZQUFvQjtBQUM5QyxVQUFNLFFBQVEsS0FBSyxJQUFJLE1BQU0saUJBQWlCLEVBQUUsT0FBTyxVQUFRLEtBQUssS0FBSyxXQUFXLFVBQVUsQ0FBQztBQUMvRixVQUFNLGFBQWEsTUFBTTtBQUN6QixRQUFJLGlCQUFpQjtBQUVyQixRQUFJLG1CQUFtQixJQUFJLHVCQUFPLGNBQWMsdUJBQXVCLGFBQWEsR0FBSTtBQUV4RixVQUFNLFlBQVksTUFBTSxJQUFJLFVBQVEsTUFBTSxLQUFLLG1CQUFtQixLQUFLLElBQUksRUFBRSxLQUFLLE1BQU07QUFDdkY7QUFDQSx1QkFBaUIsV0FBVyxtQkFBbUIscUJBQXFCLFlBQVk7QUFBQSxJQUNqRixDQUFDLENBQUM7QUFFRixVQUFNLGVBQWUsWUFBWTtBQUNoQyxVQUFJLFVBQVUsV0FBVztBQUFHO0FBQzVCLFlBQU0sVUFBVSxNQUFNLEVBQUU7QUFBQSxJQUN6QjtBQUVBLFVBQU0scUJBQXFCO0FBQzNCLFVBQU0sV0FBVyxNQUFNLEtBQUssSUFBSSxvQkFBb0IsVUFBVSxNQUFNLENBQUMsRUFBRSxLQUFLLElBQUksRUFBRSxJQUFJLFlBQVk7QUFFbEcsVUFBTSxRQUFRLElBQUksUUFBUTtBQUUxQixxQkFBaUIsS0FBSztBQUN0QixRQUFJLHVCQUFPLE9BQU8sMkNBQTJDO0FBQUEsRUFDOUQ7QUFFRDsiLAogICJuYW1lcyI6IFtdCn0K
